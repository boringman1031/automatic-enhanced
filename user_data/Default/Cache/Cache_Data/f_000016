import{aT as Es,aU as Ds,aa as nt,ab as ce,c as y,aV as Cs,aW as yn,Y as U,j as g,aX as ws,aY as As,aZ as Rs,n as Vr,m as Ns,a5 as Os,S as P,a7 as Ts,K as De,D as K,I as ne,a2 as Ps,x as Bs,y as Ms,a_ as Ls,z as S,w as $,A as N,g as It,a0 as Et,r as rt,a as de,Q as Dt,b as Te,aI as _s,aJ as Gs,aL as js,i as $s,k as Fs,_ as ks,$ as Ws,W as nr,X as we,ao as qr,ax as zr,a9 as _,aj as Hs,C as Us,u as xn,F as vn,t as Sn,H as In,J as Yr,M as Vs,O as qs,P as Kr,ap as zs,U as Xr,ar as Ys,a$ as rr,b0 as En,b1 as B,b2 as Ks,l as Xs,aS as Jr,a4 as at}from"./index-DH9E0Dqq.js";import{T as Qr,b as Js,c as Qs,d as Zs,e as ei,B as or}from"./BasicInput-D0G2rzCO.js";import{C as ti,a as ni}from"./CardContent-Buvwad75.js";import{d as Pe,S as Xt}from"./DatePicker-DAUzD4hQ.js";import{C as ri}from"./PaginationControl-CenqpxQH.js";function Ye(e){"@babel/helpers - typeof";return Ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(e)}function oi(e,t){if(Ye(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ye(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function si(e){var t=oi(e,"string");return Ye(t)=="symbol"?t:t+""}function ii(e){return Ds("MuiCardHeader",e)}const sr=Es("MuiCardHeader",["root","avatar","action","content","title","subheader"]),ai=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],ci=e=>{const{classes:t}=e;return As({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},ii,t)},li=nt("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>ce({[`& .${sr.title}`]:t.title,[`& .${sr.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),ui=nt("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),di=nt("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),pi=nt("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),fi=y.forwardRef(function(t,n){const r=Cs({props:t,name:"MuiCardHeader"}),{action:o,avatar:s,className:i,component:a="div",disableTypography:c=!1,subheader:l,subheaderTypographyProps:p,title:u,titleTypographyProps:d}=r,f=yn(r,ai),m=ce({},r,{component:a,disableTypography:c}),h=ci(m);let b=u;b!=null&&b.type!==U&&!c&&(b=g.jsx(U,ce({variant:s?"body2":"h5",className:h.title,component:"span",display:"block"},d,{children:b})));let I=l;return I!=null&&I.type!==U&&!c&&(I=g.jsx(U,ce({variant:s?"body2":"body1",className:h.subheader,color:"text.secondary",component:"span",display:"block"},p,{children:I}))),g.jsxs(li,ce({className:ws(h.root,i),as:a,ref:n,ownerState:m},f,{children:[s&&g.jsx(ui,{className:h.avatar,ownerState:m,children:s}),g.jsxs(pi,{className:h.content,ownerState:m,children:[b,I]}),o&&g.jsx(di,{className:h.action,ownerState:m,children:o})]}))}),Yp=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([n,r])=>{r!=null&&(Array.isArray(r)?r.length>0&&t.set(n,r.join(",")):t.set(n,r.toString()))}),t.toString()},gi=({children:e,onSubmit:t,sx:n})=>g.jsx(Rs,{onSubmit:t,component:"form",maxWidth:!1,sx:{display:"flex",flexDirection:"column",gap:4,...n},children:e}),Kp=({title:e,name:t,index:n,alertText:r,stackSx:o,labelSx:s,selectBtnSx:i,handleOpenUploadDialog:a,handleOpenSearchDialog:c,disabledUpload:l,searchBtnText:p="搜尋現有圖片",uploadBtnText:u="上傳圖片"})=>{const{control:d}=Vr(),{setUploadDialogOpen:f,setSearchDialogOpen:m,setMissionIndex:h}=Ns(),b=y.useCallback(()=>{f(!0),n!==void 0&&h(n),a&&a()},[f,h,n,a]),I=y.useCallback(()=>{m(!0),n!==void 0&&h(n),c&&c()},[m,h,n,c]);return g.jsx(Os,{control:d,name:t,render:({field:x,fieldState:{error:E}})=>g.jsxs(P,{gap:2,flex:1,...x,children:[g.jsxs(P,{flexDirection:"row",gap:2,sx:o,children:[r?g.jsx(Ts,{labelTitle:e,labelSx:{flex:3},alertText:r}):g.jsx(De,{sx:{my:"auto",...s},flex:2,children:e}),g.jsxs(P,{flexDirection:"row",justifyContent:"space-between",gap:1,flex:2,sx:i,children:[g.jsx(K,{label:u,styleType:"image",btnColor:"BROWN",onClick:b,sx:{display:l?"none":"block"},disabled:l}),g.jsx(K,{label:p,styleType:"image",btnColor:"BROWN",onClick:I})]})]}),!!E&&g.jsx(P,{sx:{border:`1px solid ${ne.CANCEL_RED}`,p:3},children:g.jsx(Ps,{sx:{textAlign:"center",color:"red"},children:E.message})})]})})};function Zr(){const e=Bs(),t=Ms(r=>r.flag.flag);return{setFlag:r=>{e(Ls.actions.setFlag(r))},flag:t}}const Y=(e,t,n,r,o)=>{let s=S.string();return e!==$.DRAFT&&(s=s.min(t,{message:n}),r&&(s=s.max(r,{message:o}))),s},He=(e,t,n,r,o)=>{let s=S.number();return e!==$.DRAFT&&(s=s.min(t,{message:n})),s},mi=(e,t,n,r,o,s)=>{let i=S.array(t);return e!==$.DRAFT&&n&&(i=i.min(n,{message:r})),i},Ee=class Ee{static MISSION_ID(t){return`${this.MISSION}/${t}`}};Ee.MISSION="/mission",Ee.MISSION_SEARCH="/mission/search",Ee.MISSION_LEVEL="/mission/level",Ee.MISSION_AREA="/mission/area",Ee.MISSION_SEARCH_EXPORT="/mission/search/export";let Z=Ee;function Be(e,t){const n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}async function hi(e,t){try{const n=await N.get(Z.MISSION_ID(e),{signal:t}),r=await Promise.all(n.data.data.picIds.map(async o=>{if(o){const{src:s}=await It({id:o.picId});return s}}));return{...n.data.data,imagesSrc:r}}catch(n){throw new Error(`getMissionById, ${n}`)}}async function bi(e,t){try{const n=rt(e);return(await N.get(Z.MISSION_SEARCH,{signal:t,params:n})).data.data}catch(n){throw new Error(`getMissionBySearch, ${n}`)}}async function yi(e){try{const t=await N.get(Z.MISSION_SEARCH_EXPORT,{params:e,responseType:"blob"}),n=`${Pe().format("YYYY-MM-DD")}_搜尋任務.xlsx`;Be(t.data,n)}catch(t){throw new Error(`getMissionSearchExport, ${t}`)}}async function xi(e){try{return(await N.get(Z.MISSION_LEVEL,{signal:e})).data.data}catch(t){throw new Error(`getMissionLevel, ${t}`)}}async function vi(e){try{return(await N.get(Z.MISSION_AREA,{signal:e})).data.data}catch(t){throw new Error(`getMissionArea, ${t}`)}}async function Si(e){try{const t=Et(e);return(await N.post(Z.MISSION,t)).data.data}catch(t){throw new Error(`postCreateMission, ${t}`)}}async function Ii(e){try{const t=Et(e);return(await N.put(Z.MISSION_ID(t.id),t)).data.data}catch(t){throw new Error(`putUpdateMission, ${t}`)}}function Xp(e){return de({queryKey:[Z.MISSION_ID(e.id)],queryFn:({signal:t})=>hi(e.id,t),enabled:!!e.id})}function Jp(e){const t=Dt(e);return de({queryKey:[Z.MISSION_SEARCH,t],queryFn:({signal:n})=>bi(e,n),refetchOnWindowFocus:!1})}function Qp(){return de({queryKey:[Z.MISSION_LEVEL],queryFn:({signal:e})=>xi(e)})}function Zp(){return de({queryKey:[Z.MISSION_AREA],queryFn:({signal:e})=>vi(e)})}function ef(e){return Te({mutationFn:Si,onSuccess:e})}function tf(e){return Te({mutationFn:Ii,onSuccess:e,onError:()=>{console.log("putPartyPet error")},onSettled:()=>{console.log("putPartyPet settled")}})}const Ei="/twa-admin/assets/demo_card-BOb5SBdi.png",nf=["全選"],Jt=[{label:"全選",value:0}],rf=[{label:"全選",value:"全選"}],Di=[{label:"請選擇",value:0}];y.memo(({sx:e,error:t,options:n,...r})=>g.jsx(_s,{sx:{color:"white",...e},children:g.jsx(Gs,{...r,sx:{minWidth:"200px",color:"black",fontSize:"1rem",textAlign:"left",bgcolor:t?ne.FORMIK_ERROR_RED:"#fff","& fieldset":{borderColor:"#aaa !important"},"&:hover fieldset":{borderColor:"#aaa !important"},"&.Mui-focused fieldset":{borderColor:"#aaa !important"},"& .MuiSelect-icon":{color:"black",fontSize:"36px",bgcolor:t?ne.FORMIK_ERROR_RED:ne.TAB_BG_GRAY,position:"absolute",right:"0",top:"0",border:"1px solid #aaa"}},children:n.map(o=>g.jsx(js,{value:o.value,children:o.label},o.value.toString()))})}));var Ci=(e=>(e[e.PEOPLE=1]="PEOPLE",e[e.EVENT=2]="EVENT",e[e.TIME=3]="TIME",e[e.AREA=4]="AREA",e[e.OBJECT=5]="OBJECT",e[e.LANGUAGE=6]="LANGUAGE",e[e.NUMBER=7]="NUMBER",e[e.SYMBOL=8]="SYMBOL",e[e.CONCEPT=9]="CONCEPT",e[e.PHENOMENON=10]="PHENOMENON",e))(Ci||{});const eo=[{label:"人物",value:1},{label:"事件",value:2},{label:"時間",value:3},{label:"地點",value:4},{label:"物件",value:5},{label:"語文",value:6},{label:"數字",value:7},{label:"符號",value:8},{label:"概念",value:9},{label:"現象",value:10}],to=Di.concat(eo),wi=e=>{const t=to.find(n=>n.value===e);return t?t.label:""};var Dn={},Ai=Fs;Object.defineProperty(Dn,"__esModule",{value:!0});var no=Dn.default=void 0,Ri=Ai($s()),Ni=g;no=Dn.default=(0,Ri.default)((0,Ni.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m5 11H7v-2h10z"}),"RemoveCircle");const Cn=y.memo(e=>{var c;const{cardDetail:t,stackSx:n,imageSx:r,onRemoveClick:o,selectCardClick:s}=e,i=ks({id:t.picId}),a=wi(t.type)+"卡";return g.jsxs(P,{sx:{},children:[g.jsx(P,{height:0,sx:{justifyContent:"center",alignItems:"center",position:"relative",top:84},children:g.jsx(P,{sx:{backgroundColor:"#747f86"},children:g.jsx(Ws,{src:((c=i==null?void 0:i.data)==null?void 0:c.src)??"",width:135,height:135,style:{backgroundPosition:"center",backgroundSize:"cover",...r}})})}),g.jsxs(P,{width:190,height:280,sx:{backgroundImage:`url(${Ei})`,backgroundSize:"cover",backgroundPosition:"center",position:"relative",...n},children:[s&&g.jsx(K,{label:"編輯",btnColor:"BROWN",sx:{position:"absolute",bottom:-30,right:60},onClick:()=>{var l;return s(((l=i==null?void 0:i.data)==null?void 0:l.src)??"")},disabled:!(nr(we.ROLE_ADMIN)||nr(we.ROLE_MANAGER))&&t.flag===$.PASS}),o&&g.jsx(qr,{color:"error",onClick:o,sx:{position:"absolute",top:-20,right:-15},children:g.jsx(no,{color:"error",sx:{fontSize:"40px"}})}),g.jsx(P,{height:144,sx:{justifyContent:"center",alignItems:"center"}}),g.jsxs(P,{height:"auto",sx:{justifyContent:"center",alignItems:"center"},children:[g.jsx(U,{sx:{textAlign:"center",color:"white",width:"130px",height:"24px"},children:t.name.split("").map((l,p)=>g.jsx("span",{style:{color:"white",fontSize:"13px",textAlign:"center",margin:0},children:l},p))}),g.jsx(U,{sx:{color:"white",fontSize:"12px",textAlign:"start",margin:0,width:"130px",height:"70px",wordWrap:"break-word",whiteSpace:"pre-wrap",overflow:"hidden"},children:t.description.split("").map((l,p)=>g.jsx("span",{style:{color:"white",fontSize:"11px",textAlign:"center",margin:0},children:l},p))}),g.jsx(U,{sx:{textAlign:"center",color:"white",width:"130px",height:"24px"},children:a.split("").map((l,p)=>g.jsx("span",{style:{color:"white",fontSize:"10px",textAlign:"center",margin:0},children:l},p))})]})]})]})}),Oi=nt(Qr)(()=>({borderRight:"2px solid #ccc",fontWeight:"bold"})),Ti=y.memo(({data:e,width:t="40%",fontSize:n})=>g.jsx(Js,{component:zr,children:g.jsx(Qs,{"aria-label":"simple table",children:g.jsx(Zs,{children:!!e.length&&(e==null?void 0:e.map((r,o)=>g.jsxs(ei,{children:[g.jsx(Oi,{component:"th",scope:"row",width:t,align:"center",sx:{fontSize:n||16},children:r.key}),g.jsx(Qr,{align:"center",sx:{fontSize:n||16},children:r.value})]},o)))})})})),Pi=({card:e,isAudit:t,notAnswer:n})=>{const r=o=>{window.open(o,"_blank")};return g.jsxs(P,{alignItems:"center",width:{sm:t?"100%":"15%",xs:"100%"},minWidth:230,children:[g.jsxs(P,{flexDirection:"row",alignItems:"flex-start",children:[g.jsx(Cn,{cardDetail:e}),n&&e.flag!==$.PASS&&g.jsx(P,{sx:{backgroundColor:ne.CANCEL_RED,borderRadius:10,p:1,mr:-5},children:g.jsx(U,{sx:{color:ne.WHITE},children:"審查中"})})]}),g.jsxs(P,{sx:{backgroundColor:ne.DRAWER_GRAY,textAlign:"center",p:2},children:[g.jsx(U,{sx:{fontBold:"bold",color:ne.WHITE,fontSize:"1.5rem",mb:1},children:"補充資料"}),g.jsx(P,{children:e.additionalHyperlinkSet.length>0?e.additionalHyperlinkSet.map((o,s)=>g.jsxs(P,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",gap:2,children:[g.jsx(K,{label:"連結",onClick:()=>r(o.hyperlink)}),g.jsx(U,{sx:{color:ne.WHITE},children:o.name},s)]})):g.jsx(U,{sx:{color:ne.GRAY},children:"無資料"})})]})]})},qe=class qe{static CARD_ID(t){return`${this.CARD}/${t}`}};qe.CARD="/card",qe.CARD_SEARCH=`${qe.CARD}/search`;let se=qe;async function Bi(e,t){try{const n=rt(e);return(await N.get(se.CARD_SEARCH,{params:n,signal:t})).data.data}catch(n){_(n,se.CARD_SEARCH)}}async function Mi(e,t){try{const n=await N.get(se.CARD_ID(e),{signal:t}),r=n.data.data.picId?await It({id:n.data.data.picId}):{src:""};return{...n.data.data,imageSrc:r.src??""}}catch(n){_(n,se.CARD_ID(e))}}async function Li(e){try{return(await N.post(se.CARD,e)).data.data}catch(t){_(t,se.CARD)}}async function _i(e){try{return(await N.put(se.CARD_ID(e.id),e)).data.data}catch(t){_(t,se.CARD_ID(e.id))}}function of(e){const t=Dt(e);return de({queryKey:[se.CARD_SEARCH,t],queryFn:({signal:n})=>Bi(e,n),refetchOnWindowFocus:!1})}function Gi(e){return de({queryKey:[se.CARD_ID(e.id)],queryFn:({signal:t})=>Mi(e.id,t),enabled:!!e.id,refetchOnWindowFocus:!1})}function sf(e){return Te({mutationFn:Li,onSuccess:e})}function af(e){return Te({mutationFn:_i,onSuccess:t=>{if(t)e(t);else throw new Error("usePutUpdateCard error")}})}const ji=({label:e,paperText:t,missionAdditionalHyperlinkSet:n})=>g.jsxs(zr,{elevation:3,sx:{minWidth:"45%",minHeight:200},children:[g.jsx(De,{sx:{width:"calc(100% - 1.2rem)",mx:"auto"},children:e}),g.jsx(P,{p:3,children:g.jsx(U,{textAlign:"start",children:n?g.jsxs("span",{children:[n.name,"(",g.jsx("a",{href:n.hyperlink,target:"_blank",rel:"noopener noreferrer",children:n.hyperlink}),")"]},n.name):t})})]}),ir=y.memo(ji),$i=({keyWord:e,cardId:t,hint:n,isAudit:r})=>{const{data:o}=Gi({id:t??0});return g.jsxs(P,{width:"45%",flexDirection:"row",gap:3,minWidth:500,children:[g.jsx(P,{flex:1,children:g.jsxs(P,{gap:1,children:[o&&o.type&&g.jsx(Ti,{data:[{key:"類別",value:to[o.type].label}],width:"50%"}),g.jsxs(P,{gap:1,children:[g.jsx(ir,{label:"線索關鍵詞",paperText:e}),g.jsx(ir,{label:"卡片鷹架提示",paperText:n})]})]})}),g.jsxs(P,{flex:1,alignItems:"center",justifyContent:"center",children:[g.jsx(De,{sx:{width:"calc(100% - 0.6rem*2)",textAlign:"center"},children:"正確卡片"}),g.jsx(P,{flexDirection:"row",justifyContent:"center",alignItems:"center",children:o?r?g.jsx(Pi,{card:o,isAudit:r}):g.jsx(Cn,{cardDetail:o}):g.jsx("img",{width:"100%",height:300})})]})]})},cf=y.memo($i),Kn=class Kn{};Kn.CENTURY_ALL="/century/all";let pt=Kn;async function Fi(e){try{return(await N.get(pt.CENTURY_ALL,{signal:e})).data.data}catch(t){throw new Error(`getAllCentury, ${t}`)}}function lf(){return de({queryKey:[pt.CENTURY_ALL],queryFn:({signal:e})=>Fi(e)})}const Xn=class Xn{};Xn.SUBJECT_ALL="/subject/all";let ft=Xn;async function ki(e){try{const t=await N.get(ft.SUBJECT_ALL,{signal:e});return Hs.dispatch(Us.actions.setSubjectOptions(t.data.data)),t.data.data}catch(t){throw new Error(`getAllSubject, ${t}`)}}function Wi(){return de({queryKey:[ft.SUBJECT_ALL],queryFn:({signal:e})=>ki(e)})}const Hi=e=>S.intersection(S.object({name:Y(e,1,"卡片名稱必填",16,"卡片名稱不可超過16字"),description:Y(e,1,"文字內容必填",24,"文字內容不可超過24字"),picId:He(e,1,"圖片必填"),type:He(e,1,"卡片類型必填"),subjectId:He(e,1,"學科必填"),syllabus:S.union([S.string().optional(),S.null()]),note:S.union([S.string().optional(),S.null()]),schoolId:S.number().min(1,{message:"學校ID必填"}),flag:S.nativeEnum($),additionalHyperlinkSet:S.union([S.array(S.object({name:Y(e,1,"外部連結名稱必填"),hyperlink:Y(e,1,"外部超連結必填"),adl:S.boolean()})).max(1),S.null()])}),S.discriminatedUnion("variant",[S.object({variant:S.literal("create")}),S.object({variant:S.literal("update"),id:S.number().min(1)})])),Ui={variant:"create",name:"",description:"",picId:0,type:0,subjectId:0,syllabus:"",note:"",schoolId:0,flag:$.IN_SCHOOL,additionalHyperlinkSet:[]},Vi=({children:e})=>{const{flag:t}=Zr(),n=Hi(t),r=xn({mode:"all",resolver:Sn(n),defaultValues:Ui});return g.jsxs(vn,{...r,children:[e,!1]})},uf=Vi,df=y.memo(({cardDetail:e,open:t,onClose:n})=>{var o;const r=s=>{window.open(s,"_blank")};return g.jsxs(In,{open:t,fullScreen:!0,onClose:n,sx:{p:{xs:5,md:15},px:{md:30}},children:[g.jsx(K,{label:"關閉",sx:{position:"absolute",top:5,right:5,bgcolor:ne.CANCEL_RED},onClick:n}),e?g.jsxs(P,{justifyContent:"center",alignItems:"center",height:"100%",sx:{bgcolor:"#aaa"},children:[g.jsx(Cn,{cardDetail:e}),g.jsxs(ti,{sx:{textAlign:"left",color:"white",bgcolor:ne.DRAWER_GRAY},children:[g.jsx(fi,{title:"補充資料"}),g.jsx(ni,{children:g.jsx(P,{gap:2,children:(e==null?void 0:e.additionalHyperlinkSet.length)>0?(o=e==null?void 0:e.additionalHyperlinkSet)==null?void 0:o.map(s=>g.jsxs(P,{flexDirection:"row",alignItems:"center",gap:3,children:[g.jsx(K,{label:"連結",sx:{maxWidth:80},onClick:()=>r(s.hyperlink)}),g.jsx(U,{variant:"body2",color:"text.secondary",sx:{color:"white"},children:s.name})]},s.name+s.hyperlink)):g.jsx(U,{variant:"body2",color:"text.secondary",textAlign:"center",sx:{color:"white"},children:"無補充資料"})})})]})]}):g.jsx(Yr,{type:"card"})]})}),pf=y.memo(({value:e,handleChange:t,isSchoolAndPass:n})=>{const{data:r}=Wi(),o=y.useMemo(()=>r?Jt.concat(r.filter(a=>a.value!="全科目").map(a=>({label:a.value,value:a.id}))||[]):[],[r]),s=y.useMemo(()=>Jt.concat(eo),[]),i=y.useMemo(()=>n?Vs:Jt.concat(qs),[n]);return g.jsxs(y.Fragment,{children:[g.jsx(Xt,{label:"學科",options:o,value:e.subjectId,onChange:t("subjectId")}),g.jsx(Xt,{label:"類別",options:s,value:e.type,onChange:t("type")}),g.jsx(Xt,{label:"狀態",options:i,value:e.flag,onChange:t("flag")})]})});var ro={exports:{}},M={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wn=Symbol.for("react.element"),An=Symbol.for("react.portal"),Ct=Symbol.for("react.fragment"),wt=Symbol.for("react.strict_mode"),At=Symbol.for("react.profiler"),Rt=Symbol.for("react.provider"),Nt=Symbol.for("react.context"),qi=Symbol.for("react.server_context"),Ot=Symbol.for("react.forward_ref"),Tt=Symbol.for("react.suspense"),Pt=Symbol.for("react.suspense_list"),Bt=Symbol.for("react.memo"),Mt=Symbol.for("react.lazy"),zi=Symbol.for("react.offscreen"),oo;oo=Symbol.for("react.module.reference");function ie(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case wn:switch(e=e.type,e){case Ct:case At:case wt:case Tt:case Pt:return e;default:switch(e=e&&e.$$typeof,e){case qi:case Nt:case Ot:case Mt:case Bt:case Rt:return e;default:return t}}case An:return t}}}M.ContextConsumer=Nt;M.ContextProvider=Rt;M.Element=wn;M.ForwardRef=Ot;M.Fragment=Ct;M.Lazy=Mt;M.Memo=Bt;M.Portal=An;M.Profiler=At;M.StrictMode=wt;M.Suspense=Tt;M.SuspenseList=Pt;M.isAsyncMode=function(){return!1};M.isConcurrentMode=function(){return!1};M.isContextConsumer=function(e){return ie(e)===Nt};M.isContextProvider=function(e){return ie(e)===Rt};M.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===wn};M.isForwardRef=function(e){return ie(e)===Ot};M.isFragment=function(e){return ie(e)===Ct};M.isLazy=function(e){return ie(e)===Mt};M.isMemo=function(e){return ie(e)===Bt};M.isPortal=function(e){return ie(e)===An};M.isProfiler=function(e){return ie(e)===At};M.isStrictMode=function(e){return ie(e)===wt};M.isSuspense=function(e){return ie(e)===Tt};M.isSuspenseList=function(e){return ie(e)===Pt};M.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ct||e===At||e===wt||e===Tt||e===Pt||e===zi||typeof e=="object"&&e!==null&&(e.$$typeof===Mt||e.$$typeof===Bt||e.$$typeof===Rt||e.$$typeof===Nt||e.$$typeof===Ot||e.$$typeof===oo||e.getModuleId!==void 0)};M.typeOf=ie;ro.exports=M;var Yi=ro.exports;const H=class H{static EVENT_ID(t){return`${this.EVENT}/${t}`}static EVENT_STATISTICS_ID(t){return`${this.EVENT}/statistics/${t}`}};H.EVENT="/event",H.EVENT_SEARCH=`${H.EVENT}/search`,H.EVENT_CONDITION_OPTION=`${H.EVENT}/condition/option`,H.EVENT_RANKING=`${H.EVENT}/ranking`,H.EVENT_CONTEST_REWARD=`${H.EVENT}/send/contest/reward`,H.EVENT_PET="/pet/event",H.EVENT_SEARCH_EXPORT=`${H.EVENT_SEARCH}/export`,H.EVENT_RANKING_EXPORT=`${H.EVENT}/ranking/export`;let ee=H;async function ff(e){try{return(await N.post(ee.EVENT,e)).data.data}catch(t){_(t)}}async function gf(e){try{return(await N.put(ee.EVENT_ID(e.id),e)).data.data}catch(t){_(t)}}async function mf(e,t){const n=rt(e);try{return(await N.get(ee.EVENT_SEARCH,{params:n,signal:t})).data.data}catch(r){_(r)}}async function Ki(e){try{const t=await N.get(ee.EVENT_SEARCH_EXPORT,{params:e,responseType:"blob"}),n=`${Pe().format("YYYY-MM-DD")}_搜尋活動.xlsx`;Be(t.data,n)}catch(t){throw new Error(`getEventSearchExport, ${t}`)}}async function hf(e,t){try{const n=await N.get(ee.EVENT_ID(e),{signal:t}),r=n.data.data.picId?await It({id:n.data.data.picId}):{src:""};return{...n.data.data,imageSrc:r.src??""}}catch(n){_(n)}}async function bf(e){try{return(await N.delete(ee.EVENT_ID(e))).data.data}catch(t){_(t)}}async function yf(e){try{return(await N.get(ee.EVENT_CONDITION_OPTION,{signal:e})).data.data}catch(t){_(t)}}async function xf(e,t){try{return(await N.get(ee.EVENT_RANKING,{params:{eventId:e},signal:t})).data.data}catch(n){_(n)}}async function vf(e){try{const t=await N.get(ee.EVENT_PET,{signal:e});return await Promise.all(t.data.data.map(async r=>{const o=await It({id:r.picId});return{...r,petImageSrc:o.src??""}}))}catch(t){_(t)}}async function Sf(e){try{return(await N.get(ee.EVENT_STATISTICS_ID(e))).data.data}catch(t){_(t)}}async function If(e){try{const t=await N.get(ee.EVENT_RANKING_EXPORT,{params:e,responseType:"blob"}),n=`${Pe().format("YYYY-MM-DD")}_活動排行榜.xlsx`;Be(t.data,n)}catch(t){_(t,"getEventRankingExport")}}const Ef=e=>e.replace(/\$\{\{(.*?)\}\}/g,"$[[$1]]"),ze=class ze{static STAGE_ID(t){return`${this.STAGE}/${t}`}static STAGE_CHANGE_PUBLISH(t){return`${this.STAGE_ID(t)}/change/publish`}};ze.STAGE="/stage",ze.STAGE_SEARCH="/stage/search",ze.STAGE_SEARCH_EXPORT="/stage/search/export";let xe=ze;async function Df(e,t){const n=rt(e);try{return(await N.get(xe.STAGE_SEARCH,{signal:t,params:n})).data.data}catch(r){throw new Error(`getStageBySearch, ${r}`)}}async function Cf(e,t){try{return(await N.get(xe.STAGE_ID(e),{signal:t})).data.data}catch(n){throw new Error(`getStageById, ${n}`)}}async function wf(e){try{const t=e.missionEnemySet.map(o=>Et(o)),n={...e,missionEnemySet:t};return(await N.post(xe.STAGE,n)).data.data}catch(t){throw new Error(`postCreateStage, ${t}`)}}async function Af(e){try{const t=Et(e);return(await N.put(xe.STAGE_ID(t.id),t)).data.data}catch(t){throw new Error(`postUpdateStage, ${t}`)}}async function Rf(e,t){try{return(await N.put(xe.STAGE_CHANGE_PUBLISH(e),{isPublish:t})).data.data}catch(n){throw new Error(`putChangeStagePublish, ${n}`)}}async function Xi(e){try{const t=await N.get(xe.STAGE_SEARCH_EXPORT,{params:e,responseType:"blob"}),n=`${Pe().format("YYYY-MM-DD")}_搜尋關卡.xlsx`;Be(t.data,n)}catch(t){throw new Error(`getStageSearchExport, ${t}`)}}const he=class he{};he.AUDIT="/audit",he.AUDIT_SEARCH="/audit/search",he.AUDIT_COMMENT="/audit/comment",he.AUDIT_AUDITOR_SEARCH="/audit/auditor/search",he.AUDIT_ASSIGNMENT="/audit/assignment",he.AUDIT_SEARCH_EXPORT="/audit/search/export";let ue=he;async function Ji(e,t){try{const n=rt(e);return(await N.get(ue.AUDIT_SEARCH,{signal:t,params:n})).data.data}catch(n){_(n)}}async function Qi(e){try{const t=await N.get(ue.AUDIT_SEARCH_EXPORT,{params:e,responseType:"blob"}),n=`${Pe().format("YYYY-MM-DD")}_搜尋題目審查.xlsx`;Be(t.data,n)}catch(t){_(t)}}async function Zi({type:e,contentId:t},n){try{return(await N.get(ue.AUDIT_COMMENT,{signal:n,params:{type:e,contentId:t}})).data.data}catch(r){_(r)}}async function ea(e){try{return(await N.put(ue.AUDIT_COMMENT,e)).data.data}catch(t){_(t)}}async function ta(e,t){try{return(await N.get(ue.AUDIT_AUDITOR_SEARCH,{params:e,signal:t})).data.data}catch(n){_(n)}}async function na(e){try{return(await N.put(ue.AUDIT_ASSIGNMENT,e)).data.data}catch(t){_(t)}}function so(e){const t={...e};return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)&&r.length>0&&(t[n]=r.join(","))}),t}const ae=class ae{};ae.SIGN_IN_EVENT_ID=t=>`/signInEvent/${t}`,ae.SIGN_IN_EVENT="/signInEvent",ae.SIGN_IN_EVENT_SIGN_IN="/signInEvent/signIn",ae.SIGN_IN_EVENT_SEARCH="/signInEvent/search",ae.SIGN_IN_EVENT_REWARD_DAYS_COUNT_LIST="/signInEvent/rewardDaysCountList",ae.SIGN_IN_EVENT_FOR_GAME="/signInEvent/forGame",ae.SIGN_IN_EVENT_ALL="/signInEvent/all",ae.SIGN_IN_EVENT_ALL_PAGE="/signInEvent/all/page",ae.SIGN_IN_EVENT_EXPORT_SEARCH="/signInEvent/export/search";let me=ae;async function Nf(e){try{return(await N.get(me.SIGN_IN_EVENT_ID(e))).data.data}catch(t){_(t,"getSignInEventById")}}async function Of(e,t){try{return(await N.put(me.SIGN_IN_EVENT_ID(e),t)).data.data}catch(n){_(n,"updateSignInEvent")}}async function Tf(e){try{return(await N.delete(me.SIGN_IN_EVENT_ID(e.id),{params:{permanently:e.permanently}})).data}catch(t){_(t,"deleteSignInEvent")}}async function Pf(e){try{const t=so(e);return(await N.get(me.SIGN_IN_EVENT_SEARCH,{params:t})).data.data}catch(t){_(t,"getSignInEventSearch")}}async function Bf(e){try{return(await N.get(me.SIGN_IN_EVENT_REWARD_DAYS_COUNT_LIST,{params:{signInEventId:e}})).data.data}catch(t){_(t,"getSignInEventRewardDaysCountList")}}async function Mf(e){try{return(await N.post(me.SIGN_IN_EVENT,e)).data.data}catch(t){_(t,"createSignInEvent")}}async function ra(e){try{const t=so(e),n=await N.get(me.SIGN_IN_EVENT_EXPORT_SEARCH,{params:t,responseType:"blob"}),r=`${Pe().format("YYYY-MM-DD")}_搜尋簽到活動.xlsx`;Be(n.data,r)}catch(t){_(t,"getSignInEventSearchExport")}}function oa({open:e,setOpen:t,request:n,totalPages:r,type:o}){const[s,i]=y.useState(1),[a,c]=y.useState(r||1),[l,p]=y.useState(!1),[u,d]=y.useState("正在匯出..."),f=y.useCallback(x=>{const E=Number(x.target.value),D=Math.max(1,Math.min(E,a||1));i(D)},[a]),m=y.useCallback(x=>{const E=Number(x.target.value),D=Math.max(s,Math.min(E,r||1));c(D)},[s,r]),h=y.useCallback(x=>{let E={};if(x==="STAGE"){const{page:D,gameId:A,flag:w,...R}=n;E={...R,...A!==0?{gameId:A}:{},...w!==0?{flag:w}:{}}}if(x==="MISSION"){const{page:D,flag:A,grade:w,centuryId:R,area:O,subjectId:G,...L}=n;E={...L,...A!==0?{flag:A}:{},...w!==0?{grade:w}:{},...R!==0?{centuryId:R}:{},...G!==0?{subjectId:G}:{},...O!=="全選"?{area:O}:{}}}if(x==="EVENT"){const{page:D,type:A,status:w,typeList:R,range:O,...G}=n;E={...G,...w!=="全選"?{status:w}:{},...R!=="全選"?{typeList:R}:{},...O!=="全選"?{range:O}:{}}}if(x==="TOPIC_AUDIT"){const{page:D,type:A,flag:w,...R}=n;E={...R,...w!==0?{flag:w}:{}}}if(x==="SIGN_IN_EVENT"){const{page:D,sort:A,status:w,...R}=n;E={...R,...w!=="全選"?{status:w}:{}}}return E={...E,startPage:s-1,endPage:a-1},E},[n,s,a]),b=y.useCallback(async x=>{p(!0);const E=h(x);try{x==="STAGE"&&await Xi(E),x==="MISSION"&&await yi(E),x==="EVENT"&&await Ki(E),x==="TOPIC_AUDIT"&&await Qi(E),x==="SIGN_IN_EVENT"&&await ra(E)}catch(D){console.log(`匯出 Excel 失敗: ${D}`)}finally{p(!1)}},[n,s,a]),I=y.useCallback(()=>{t(!1)},[t]);return y.useEffect(()=>{if(l){const x=setInterval(()=>{d(E=>E==="正在匯出..."?"正在匯出.":E==="正在匯出."?"正在匯出..":"正在匯出...")},500);return()=>clearInterval(x)}},[l]),y.useEffect(()=>{i(1),c(r)},[e,r]),g.jsxs(In,{open:e,onClose:I,maxWidth:"xs",fullWidth:!0,children:[g.jsxs(Kr,{children:[g.jsx(U,{variant:"h6",children:"匯出 Excel 頁數設定"}),g.jsx(qr,{"aria-label":"close",onClick:I,sx:{position:"absolute",right:8,top:12},children:g.jsx(zs,{})})]}),g.jsxs(Xr,{sx:{py:2,gap:2,minHeight:"120px",display:"flex",justifyContent:"center",alignItems:"center"},children:[g.jsx(or,{onChange:f,value:s,sx:{width:"120px","& .MuiInputBase-input":{textAlign:"center",py:"8px"}},type:"number",placeholder:"起始頁數"}),g.jsx(U,{sx:{fontSize:"1.25rem"},children:"～"}),g.jsx(or,{onChange:m,value:a,sx:{width:"120px","& .MuiInputBase-input":{textAlign:"center",py:"8px"}},type:"number",placeholder:"結束頁數"})]}),g.jsx(Ys,{sx:{px:3,pb:2,display:"flex",justifyContent:"center"},children:g.jsx(K,{label:l?u:"匯出",onClick:()=>b(o),btnColor:"EXCEL",disabled:l})})]})}const Lf=y.memo(oa),io=e=>S.object({name:Y(e,1,"任務名稱必填",52,"任務名稱最多52個字"),level:Y(e,1,"等級必填",3,"等級最多3個字"),centuryId:He(e,1,"世紀必填"),area:Y(e,1,"地點必填"),mainSubjectId:He(e,1,"主要學科必填"),subjectIds:S.array(S.number()).max(4,{message:"最多選擇4科其他學科"}),description:Y(e,1,"線索文本必填"),syllabus:S.union([S.string().optional(),S.null()]),note:S.union([S.string().optional(),S.null()]),schoolId:S.number().min(1,{message:"學校ID必填"}),flag:S.nativeEnum($),answerDescription:Y(e,1,"答案說明必填"),picIds:S.array(S.number()),missionHintSet:S.array(S.object({hint:Y(e,1,"線索提示必填")})),missionAdditionalHyperlinkSet:S.array(S.object({name:Y(e,1,"外部連結名稱必填"),hyperlink:Y(e,1,"外部超連結必填"),adl:S.boolean()})).max(2),cardIds:S.array(S.object({id:S.number(),type:S.number()})),missionAnswerCardSet:mi(e,S.object({cardId:S.number(),cardType:S.number(),keyWord:S.string().min(1,"線索關鍵詞為必填").refine(t=>{const n=t.trim(),r=(n.match(/[\u4e00-\u9fa5]/g)||[]).length,o=(n.match(/[a-zA-Z]/g)||[]).length;return o===0&&r>0?r<=8:r===0&&o>0?n.length<=20:n.length<=12},`字數超出限制：
中文限8字
英文限20字
中英混合限12字`),answerHint:Y(e,1,"提示必填"),orderNum:S.number()}),3,"答案卡最少選擇3張").max(6,{message:"答案卡最多選擇6張"})}),sa=e=>io(e).refine(t=>(t.description.match(/\$\[\[/g)||[]).length>=3,{message:"文本中至少需要包含3個關鍵字",path:["description"]}).refine(t=>t.cardIds.length-t.missionAnswerCardSet.length>7,{message:"非正確答案知識卡最少選擇8張",path:["cardIds"]}).refine(t=>{const n=t.cardIds.reduce((o,s)=>(o[s.type]?o[s.type]+=1:o[s.type]=1,o),{});return Object.values(n).every(o=>o>=3)},{message:"每種類型至少3張",path:["cardIds"]}),ia=S.intersection(sa($.IN_SCHOOL),S.discriminatedUnion("variant",[S.object({variant:S.literal("create")}),S.object({variant:S.literal("update"),id:S.number().min(1)})])),aa=S.intersection(io($.DRAFT),S.discriminatedUnion("variant",[S.object({variant:S.literal("create")}),S.object({variant:S.literal("update"),id:S.number().min(1)})])),ca=e=>e===$.DRAFT?aa:ia,la={variant:"create",name:"",description:"",level:"01A",centuryId:0,area:"",mainSubjectId:0,subjectIds:[],syllabus:"",note:"",schoolId:0,flag:$.IN_SCHOOL,answerDescription:"",picIds:[],missionHintSet:[{hint:""},{hint:""},{hint:""}],missionAdditionalHyperlinkSet:[],cardIds:[],missionAnswerCardSet:[]};function ua(e,t,n){return(t=si(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ar(Object(n),!0).forEach(function(r){ua(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var lr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Qt=function(){return Math.random().toString(36).substring(7).split("").join(".")},ur={INIT:"@@redux/INIT"+Qt(),REPLACE:"@@redux/REPLACE"+Qt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Qt()}};function da(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ao(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(q(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(q(1));return n(ao)(e,t)}if(typeof e!="function")throw new Error(q(2));var o=e,s=t,i=[],a=i,c=!1;function l(){a===i&&(a=i.slice())}function p(){if(c)throw new Error(q(3));return s}function u(h){if(typeof h!="function")throw new Error(q(4));if(c)throw new Error(q(5));var b=!0;return l(),a.push(h),function(){if(b){if(c)throw new Error(q(6));b=!1,l();var x=a.indexOf(h);a.splice(x,1),i=null}}}function d(h){if(!da(h))throw new Error(q(7));if(typeof h.type>"u")throw new Error(q(8));if(c)throw new Error(q(9));try{c=!0,s=o(s,h)}finally{c=!1}for(var b=i=a,I=0;I<b.length;I++){var x=b[I];x()}return h}function f(h){if(typeof h!="function")throw new Error(q(10));o=h,d({type:ur.REPLACE})}function m(){var h,b=u;return h={subscribe:function(x){if(typeof x!="object"||x===null)throw new Error(q(11));function E(){x.next&&x.next(p())}E();var D=b(E);return{unsubscribe:D}}},h[lr]=function(){return this},h}return d({type:ur.INIT}),r={dispatch:d,subscribe:u,getState:p,replaceReducer:f},r[lr]=m,r}function dr(e,t){return function(){return t(e.apply(this,arguments))}}function pr(e,t){if(typeof e=="function")return dr(e,t);if(typeof e!="object"||e===null)throw new Error(q(16));var n={};for(var r in e){var o=e[r];typeof o=="function"&&(n[r]=dr(o,t))}return n}function co(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,o){return function(){return r(o.apply(void 0,arguments))}})}function pa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var o=r.apply(void 0,arguments),s=function(){throw new Error(q(15))},i={getState:o.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(c){return c(i)});return s=co.apply(void 0,a)(o.dispatch),cr(cr({},o),{},{dispatch:s})}}}var lo={exports:{}},uo={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ae=y;function fa(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ga=typeof Object.is=="function"?Object.is:fa,ma=Ae.useState,ha=Ae.useEffect,ba=Ae.useLayoutEffect,ya=Ae.useDebugValue;function xa(e,t){var n=t(),r=ma({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return ba(function(){o.value=n,o.getSnapshot=t,Zt(o)&&s({inst:o})},[e,n,t]),ha(function(){return Zt(o)&&s({inst:o}),e(function(){Zt(o)&&s({inst:o})})},[e]),ya(n),n}function Zt(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ga(e,n)}catch{return!0}}function va(e,t){return t()}var Sa=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?va:xa;uo.useSyncExternalStore=Ae.useSyncExternalStore!==void 0?Ae.useSyncExternalStore:Sa;lo.exports=uo;var po=lo.exports,Ia={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lt=y,Ea=po;function Da(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ca=typeof Object.is=="function"?Object.is:Da,wa=Ea.useSyncExternalStore,Aa=Lt.useRef,Ra=Lt.useEffect,Na=Lt.useMemo,Oa=Lt.useDebugValue;Ia.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var s=Aa(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=Na(function(){function c(f){if(!l){if(l=!0,p=f,f=r(f),o!==void 0&&i.hasValue){var m=i.value;if(o(m,f))return u=m}return u=f}if(m=u,Ca(p,f))return m;var h=r(f);return o!==void 0&&o(m,h)?m:(p=f,u=h)}var l=!1,p,u,d=n===void 0?null:n;return[function(){return c(t())},d===null?void 0:function(){return c(d())}]},[t,n,r,o]);var a=wa(e,s[0],s[1]);return Ra(function(){i.hasValue=!0,i.value=a},[a]),Oa(a),a};function Ta(e){e()}let fo=Ta;const Pa=e=>fo=e,Ba=()=>fo,fr=Symbol.for("react-redux-context"),gr=typeof globalThis<"u"?globalThis:{};function Ma(){var e;if(!y.createContext)return{};const t=(e=gr[fr])!=null?e:gr[fr]=new Map;let n=t.get(y.createContext);return n||(n=y.createContext(null),t.set(y.createContext,n)),n}const go=Ma(),La=()=>{throw new Error("uSES not initialized!")},_a=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Ga(e,t,n,r,{areStatesEqual:o,areOwnPropsEqual:s,areStatePropsEqual:i}){let a=!1,c,l,p,u,d;function f(x,E){return c=x,l=E,p=e(c,l),u=t(r,l),d=n(p,u,l),a=!0,d}function m(){return p=e(c,l),t.dependsOnOwnProps&&(u=t(r,l)),d=n(p,u,l),d}function h(){return e.dependsOnOwnProps&&(p=e(c,l)),t.dependsOnOwnProps&&(u=t(r,l)),d=n(p,u,l),d}function b(){const x=e(c,l),E=!i(x,p);return p=x,E&&(d=n(p,u,l)),d}function I(x,E){const D=!s(E,l),A=!o(x,c,E,l);return c=x,l=E,D&&A?m():D?h():A?b():d}return function(E,D){return a?I(E,D):f(E,D)}}function ja(e,t){let{initMapStateToProps:n,initMapDispatchToProps:r,initMergeProps:o}=t,s=yn(t,_a);const i=n(e,s),a=r(e,s),c=o(e,s);return Ga(i,a,c,e,s)}function $a(e,t){const n={};for(const r in e){const o=e[r];typeof o=="function"&&(n[r]=(...s)=>t(o(...s)))}return n}function dn(e){return function(n){const r=e(n);function o(){return r}return o.dependsOnOwnProps=!1,o}}function mr(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function mo(e,t){return function(r,{displayName:o}){const s=function(a,c){return s.dependsOnOwnProps?s.mapToProps(a,c):s.mapToProps(a,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(a,c){s.mapToProps=e,s.dependsOnOwnProps=mr(e);let l=s(a,c);return typeof l=="function"&&(s.mapToProps=l,s.dependsOnOwnProps=mr(l),l=s(a,c)),l},s}}function Rn(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function Fa(e){return e&&typeof e=="object"?dn(t=>$a(e,t)):e?typeof e=="function"?mo(e):Rn(e,"mapDispatchToProps"):dn(t=>({dispatch:t}))}function ka(e){return e?typeof e=="function"?mo(e):Rn(e,"mapStateToProps"):dn(()=>({}))}function Wa(e,t,n){return ce({},n,e,t)}function Ha(e){return function(n,{displayName:r,areMergedPropsEqual:o}){let s=!1,i;return function(c,l,p){const u=e(c,l,p);return s?o(u,i)||(i=u):(s=!0,i=u),i}}}function Ua(e){return e?typeof e=="function"?Ha(e):Rn(e,"mergeProps"):()=>Wa}function Va(){const e=Ba();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],o=t;for(;o;)r.push(o),o=o.next;return r},subscribe(r){let o=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:t=s,function(){!o||t===null||(o=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}const hr={notify(){},get:()=>[]};function ho(e,t){let n,r=hr,o=0,s=!1;function i(h){p();const b=r.subscribe(h);let I=!1;return()=>{I||(I=!0,b(),u())}}function a(){r.notify()}function c(){m.onStateChange&&m.onStateChange()}function l(){return s}function p(){o++,n||(n=t?t.addNestedSub(c):e.subscribe(c),r=Va())}function u(){o--,n&&o===0&&(n(),n=void 0,r.clear(),r=hr)}function d(){s||(s=!0,p())}function f(){s&&(s=!1,u())}const m={addNestedSub:i,notifyNestedSubs:a,handleChangeWrapper:c,isSubscribed:l,trySubscribe:d,tryUnsubscribe:f,getListeners:()=>r};return m}const qa=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gt=qa?y.useLayoutEffect:y.useEffect;function br(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function en(e,t){if(br(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!br(e[n[o]],t[n[o]]))return!1;return!0}const za=["reactReduxForwardedRef"];let bo=La;const Ya=e=>{bo=e},Ka=[null,null];function Xa(e,t,n){gt(()=>e(...t),n)}function Ja(e,t,n,r,o,s){e.current=r,n.current=!1,o.current&&(o.current=null,s())}function Qa(e,t,n,r,o,s,i,a,c,l,p){if(!e)return()=>{};let u=!1,d=null;const f=()=>{if(u||!a.current)return;const h=t.getState();let b,I;try{b=r(h,o.current)}catch(x){I=x,d=x}I||(d=null),b===s.current?i.current||l():(s.current=b,c.current=b,i.current=!0,p())};return n.onStateChange=f,n.trySubscribe(),f(),()=>{if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}function Za(e,t){return e===t}function yo(e,t,n,{pure:r,areStatesEqual:o=Za,areOwnPropsEqual:s=en,areStatePropsEqual:i=en,areMergedPropsEqual:a=en,forwardRef:c=!1,context:l=go}={}){const p=l,u=ka(e),d=Fa(t),f=Ua(n),m=!!e;return b=>{const I=b.displayName||b.name||"Component",x=`Connect(${I})`,E={shouldHandleStateChanges:m,displayName:x,wrappedComponentName:I,WrappedComponent:b,initMapStateToProps:u,initMapDispatchToProps:d,initMergeProps:f,areStatesEqual:o,areStatePropsEqual:i,areOwnPropsEqual:s,areMergedPropsEqual:a};function D(R){const[O,G,L]=y.useMemo(()=>{const{reactReduxForwardedRef:fe}=R,$e=yn(R,za);return[R.context,fe,$e]},[R]),j=y.useMemo(()=>O&&O.Consumer&&Yi.isContextConsumer(y.createElement(O.Consumer,null))?O:p,[O,p]),z=y.useContext(j),ge=!!R.store&&!!R.store.getState&&!!R.store.dispatch,Ht=!!z&&!!z.store,pe=ge?R.store:z.store,Jn=Ht?z.getServerState:pe.getState,Ut=y.useMemo(()=>ja(pe.dispatch,E),[pe]),[Ge,Qn]=y.useMemo(()=>{if(!m)return Ka;const fe=ho(pe,ge?void 0:z.subscription),$e=fe.notifyNestedSubs.bind(fe);return[fe,$e]},[pe,ge,z]),Zn=y.useMemo(()=>ge?z:ce({},z,{subscription:Ge}),[ge,z,Ge]),Vt=y.useRef(),qt=y.useRef(L),je=y.useRef(),er=y.useRef(!1);y.useRef(!1);const zt=y.useRef(!1),Yt=y.useRef();gt(()=>(zt.current=!0,()=>{zt.current=!1}),[]);const tr=y.useMemo(()=>()=>je.current&&L===qt.current?je.current:Ut(pe.getState(),L),[pe,L]),Is=y.useMemo(()=>$e=>Ge?Qa(m,pe,Ge,Ut,qt,Vt,er,zt,je,Qn,$e):()=>{},[Ge]);Xa(Ja,[qt,Vt,er,L,je,Qn]);let it;try{it=bo(Is,tr,Jn?()=>Ut(Jn(),L):tr)}catch(fe){throw Yt.current&&(fe.message+=`
The error may be correlated with this previous error:
${Yt.current.stack}

`),fe}gt(()=>{Yt.current=void 0,je.current=void 0,Vt.current=it});const Kt=y.useMemo(()=>y.createElement(b,ce({},it,{ref:G})),[G,b,it]);return y.useMemo(()=>m?y.createElement(j.Provider,{value:Zn},Kt):Kt,[j,Kt,Zn])}const w=y.memo(D);if(w.WrappedComponent=b,w.displayName=D.displayName=x,c){const O=y.forwardRef(function(L,j){return y.createElement(w,ce({},L,{reactReduxForwardedRef:j}))});return O.displayName=x,O.WrappedComponent=b,rr(O,b)}return rr(w,b)}}function ec({store:e,context:t,children:n,serverState:r,stabilityCheck:o="once",noopCheck:s="once"}){const i=y.useMemo(()=>{const l=ho(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:o,noopCheck:s}},[e,r,o,s]),a=y.useMemo(()=>e.getState(),[e]);gt(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,a]);const c=t||go;return y.createElement(c.Provider,{value:i},n)}Ya(po.useSyncExternalStore);Pa(En.unstable_batchedUpdates);function tc(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function xo(e,t){var n=y.useState(function(){return{inputs:t,result:e()}})[0],r=y.useRef(!0),o=y.useRef(n),s=r.current||!!(t&&o.current.inputs&&tc(t,o.current.inputs)),i=s?o.current:{inputs:t,result:e()};return y.useEffect(function(){r.current=!1,o.current=i},[i]),i.result}function nc(e,t){return xo(function(){return e},t)}var T=xo,C=nc,rc="Invariant failed";function oc(e,t){throw new Error(rc)}var le=function(t){var n=t.top,r=t.right,o=t.bottom,s=t.left,i=r-s,a=o-n,c={top:n,right:r,bottom:o,left:s,width:i,height:a,x:s,y:n,center:{x:(r+s)/2,y:(o+n)/2}};return c},Nn=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},yr=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},sc=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},tn={top:0,right:0,bottom:0,left:0},On=function(t){var n=t.borderBox,r=t.margin,o=r===void 0?tn:r,s=t.border,i=s===void 0?tn:s,a=t.padding,c=a===void 0?tn:a,l=le(Nn(n,o)),p=le(yr(n,i)),u=le(yr(p,c));return{marginBox:l,borderBox:le(n),paddingBox:p,contentBox:u,margin:o,border:i,padding:c}},te=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var o=Number(n);return isNaN(o)&&oc(),o},ic=function(){return{x:window.pageXOffset,y:window.pageYOffset}},mt=function(t,n){var r=t.borderBox,o=t.border,s=t.margin,i=t.padding,a=sc(r,n);return On({borderBox:a,border:o,margin:s,padding:i})},ht=function(t,n){return n===void 0&&(n=ic()),mt(t,n)},vo=function(t,n){var r={top:te(n.marginTop),right:te(n.marginRight),bottom:te(n.marginBottom),left:te(n.marginLeft)},o={top:te(n.paddingTop),right:te(n.paddingRight),bottom:te(n.paddingBottom),left:te(n.paddingLeft)},s={top:te(n.borderTopWidth),right:te(n.borderRightWidth),bottom:te(n.borderBottomWidth),left:te(n.borderLeftWidth)};return On({borderBox:t,margin:r,padding:o,border:s})},So=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return vo(n,r)},xr=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function ac(e,t){return!!(e===t||xr(e)&&xr(t))}function cc(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!ac(e[n],t[n]))return!1;return!0}function F(e,t){t===void 0&&(t=cc);var n=null;function r(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];if(n&&n.lastThis===this&&t(o,n.lastArgs))return n.lastResult;var i=e.apply(this,o);return n={lastResult:i,lastArgs:o,lastThis:this},i}return r.clear=function(){n=null},r}var Ke=function(t){var n=[],r=null,o=function(){for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];n=a,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return o.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},o};function Io(e,t){}Io.bind(null,"warn");Io.bind(null,"error");function be(){}function lc(e,t){return{...e,...t}}function re(e,t,n){const r=t.map(o=>{const s=lc(n,o.options);return e.addEventListener(o.eventName,o.fn,s),function(){e.removeEventListener(o.eventName,o.fn,s)}});return function(){r.forEach(s=>{s()})}}const uc="Invariant failed";class bt extends Error{}bt.prototype.toString=function(){return this.message};function v(e,t){throw new bt(uc)}class dc extends B.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=be,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof bt&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=re(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof bt){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const pc=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,yt=e=>e+1,fc=e=>`
  You have lifted an item in position ${yt(e.source.index)}
`,Eo=(e,t)=>{const n=e.droppableId===t.droppableId,r=yt(e.index),o=yt(t.index);return n?`
      You have moved the item from position ${r}
      to position ${o}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${o}
  `},Do=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,gc=e=>{const t=e.destination;if(t)return Eo(e.source,t);const n=e.combine;return n?Do(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},vr=e=>`
  The item has returned to its starting position
  of ${yt(e.index)}
`,mc=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${vr(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${Eo(e.source,t)}
    `:n?`
      You have dropped the item.
      ${Do(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${vr(e.source)}
  `},hc={dragHandleUsageInstructions:pc,onDragStart:fc,onDragUpdate:gc,onDragEnd:mc};var dt=hc;const k={x:0,y:0},W=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),X=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),ye=(e,t)=>e.x===t.x&&e.y===t.y,Me=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Ce=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Xe=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Sr=(e,t)=>Math.min(...t.map(n=>Xe(e,n))),Co=e=>t=>({x:e(t.x),y:e(t.y)});var bc=(e,t)=>{const n=le({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const ot=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Ir=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],yc={top:0,right:0,bottom:0,left:0},xc=(e,t)=>t?ot(e,t.scroll.diff.displacement):e,vc=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,Sc=(e,t)=>t&&t.shouldClipSubject?bc(t.pageMarginBox,e):le(e);var Re=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const o=xc(e.marginBox,r),s=vc(o,n,t),i=Sc(s,r);return{page:e,withPlaceholder:t,active:i}},Tn=(e,t)=>{e.frame||v();const n=e.frame,r=X(t,n.scroll.initial),o=Me(r),s={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:o},max:n.scroll.max}},i=Re({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s});return{...e,frame:s,subject:i}};const wo=F(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),Ao=F(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),_t=F(e=>Object.values(e)),Ic=F(e=>Object.values(e));var Le=F((e,t)=>Ic(t).filter(r=>e===r.descriptor.droppableId).sort((r,o)=>r.descriptor.index-o.descriptor.index));function Pn(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Gt(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var jt=F((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),Ec=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:o})=>{if(!n.isCombineEnabled||!Pn(o))return null;function i(f){const m={type:"COMBINE",combine:{draggableId:f,droppableId:n.descriptor.id}};return{...o,at:m}}const a=o.displaced.all,c=a.length?a[0]:null;if(e)return c?i(c):null;const l=jt(t,r);if(!c){if(!l.length)return null;const f=l[l.length-1];return i(f.descriptor.id)}const p=l.findIndex(f=>f.descriptor.id===c);p===-1&&v();const u=p-1;if(u<0)return null;const d=l[u];return i(d.descriptor.id)},_e=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const Ro={point:k,value:0},Je={invisible:{},visible:{},all:[]},Dc={displaced:Je,displacedBy:Ro,at:null};var Cc=Dc,oe=(e,t)=>n=>e<=n&&n<=t,No=e=>{const t=oe(e.top,e.bottom),n=oe(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const s=t(r.top)||t(r.bottom),i=n(r.left)||n(r.right);if(s&&i)return!0;const c=r.top<e.top&&r.bottom>e.bottom,l=r.left<e.left&&r.right>e.right;return c&&l?!0:c&&i||l&&s}},wc=e=>{const t=oe(e.top,e.bottom),n=oe(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const Bn={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Oo={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Ac=e=>t=>{const n=oe(t.top,t.bottom),r=oe(t.left,t.right);return o=>e===Bn?n(o.top)&&n(o.bottom):r(o.left)&&r(o.right)};const Rc=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:k;return ot(e,n)},Nc=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,Oc=(e,t,n)=>n(t)(e),Mn=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:o})=>{const s=r?Rc(e,t):e;return Nc(s,t,o)&&Oc(s,n,o)},Tc=e=>Mn({...e,isVisibleThroughFrameFn:No}),To=e=>Mn({...e,isVisibleThroughFrameFn:wc}),Pc=e=>Mn({...e,isVisibleThroughFrameFn:Ac(e.destination.axis)}),Bc=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:o}=t;if(r[e])return!1;const s=o[e];return s?s.shouldAnimate:!0};function Mc(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return le(Nn(n,r))}function Qe({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:o,last:s}){return e.reduce(function(a,c){const l=Mc(c,n),p=c.descriptor.id;if(a.all.push(p),!Tc({target:l,destination:t,viewport:r,withDroppableDisplacement:!0}))return a.invisible[c.descriptor.id]=!0,a;const d=Bc(p,s,o),f={draggableId:p,shouldAnimate:d};return a.visible[p]=f,a},{all:[],visible:{},invisible:{}})}function Lc(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function Er({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const o=Lc(e,{inHomeList:t});return{displaced:Je,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:o}}}}function xt({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:o,last:s,index:i,forceShouldAnimate:a}){const c=_e(e,n);if(i==null)return Er({insideDestination:t,inHomeList:c,displacedBy:o,destination:n});const l=t.find(m=>m.descriptor.index===i);if(!l)return Er({insideDestination:t,inHomeList:c,displacedBy:o,destination:n});const p=jt(e,t),u=t.indexOf(l),d=p.slice(u);return{displaced:Qe({afterDragging:d,destination:n,displacedBy:o,last:s,viewport:r.frame,forceShouldAnimate:a}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function ve(e,t){return!!t.effected[e]}var _c=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:o})=>{if(!t.isCombineEnabled)return null;const s=r.draggableId,a=n[s].descriptor.index;return ve(s,o)?e?a:a-1:e?a+1:a},Gc=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const o=r.index,s=e?o+1:o-1,i=n[0].descriptor.index,a=n[n.length-1].descriptor.index,c=t?a:a+1;return s<i||s>c?null:s},jc=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:o,insideDestination:s,previousImpact:i,viewport:a,afterCritical:c})=>{const l=i.at;if(l||v(),l.type==="REORDER"){const u=Gc({isMovingForward:e,isInHomeList:t,location:l.destination,insideDestination:s});return u==null?null:xt({draggable:n,insideDestination:s,destination:o,viewport:a,last:i.displaced,displacedBy:i.displacedBy,index:u})}const p=_c({isMovingForward:e,destination:o,displaced:i.displaced,draggables:r,combine:l.combine,afterCritical:c});return p==null?null:xt({draggable:n,insideDestination:s,destination:o,viewport:a,last:i.displaced,displacedBy:i.displacedBy,index:p})},$c=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const o=!!(e.visible[n]||e.invisible[n]);return ve(n,t)?o?k:Me(r.point):o?r.point:k},Fc=({afterCritical:e,impact:t,draggables:n})=>{const r=Gt(t);r||v();const o=r.draggableId,s=n[o].page.borderBox.center,i=$c({displaced:t.displaced,afterCritical:e,combineWith:o,displacedBy:t.displacedBy});return W(s,i)};const Po=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,kc=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,Ln=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,Dr=({axis:e,moveRelativeTo:t,isMoving:n})=>Ce(e.line,t.marginBox[e.end]+Po(e,n),Ln(e,t.marginBox,n)),Cr=({axis:e,moveRelativeTo:t,isMoving:n})=>Ce(e.line,t.marginBox[e.start]-kc(e,n),Ln(e,t.marginBox,n)),Wc=({axis:e,moveInto:t,isMoving:n})=>Ce(e.line,t.contentBox[e.start]+Po(e,n),Ln(e,t.contentBox,n));var Hc=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:o})=>{const s=Le(r.descriptor.id,n),i=t.page,a=r.axis;if(!s.length)return Wc({axis:a,moveInto:r.page,isMoving:i});const{displaced:c,displacedBy:l}=e,p=c.all[0];if(p){const d=n[p];if(ve(p,o))return Cr({axis:a,moveRelativeTo:d.page,isMoving:i});const f=mt(d.page,l.point);return Cr({axis:a,moveRelativeTo:f,isMoving:i})}const u=s[s.length-1];if(u.descriptor.id===t.descriptor.id)return i.borderBox.center;if(ve(u.descriptor.id,o)){const d=mt(u.page,Me(o.displacedBy.point));return Dr({axis:a,moveRelativeTo:d,isMoving:i})}return Dr({axis:a,moveRelativeTo:u.page,isMoving:i})},pn=(e,t)=>{const n=e.frame;return n?W(t,n.scroll.diff.displacement):t};const Uc=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:o})=>{const s=t.page.borderBox.center,i=e.at;return!n||!i?s:i.type==="REORDER"?Hc({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:o}):Fc({impact:e,draggables:r,afterCritical:o})};var $t=e=>{const t=Uc(e),n=e.droppable;return n?pn(n,t):t},Bo=(e,t)=>{const n=X(t,e.scroll.initial),r=Me(n);return{frame:le({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function wr(e,t){return e.map(n=>t[n])}function Vc(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var qc=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:o})=>{const s=Bo(t,W(t.scroll.current,o)),i=n.frame?Tn(n,W(n.frame.scroll.current,o)):n,a=e.displaced,c=Qe({afterDragging:wr(a.all,r),destination:n,displacedBy:e.displacedBy,viewport:s.frame,last:a,forceShouldAnimate:!1}),l=Qe({afterDragging:wr(a.all,r),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:a,forceShouldAnimate:!1}),p={},u={},d=[a,c,l];return a.all.forEach(m=>{const h=Vc(m,d);if(h){u[m]=h;return}p[m]=!0}),{...e,displaced:{all:a.all,invisible:p,visible:u}}},zc=(e,t)=>W(e.scroll.diff.displacement,t),_n=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=zc(n,e),o=X(r,t.page.borderBox.center);return W(t.client.borderBox.center,o)},Mo=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:o,onlyOnMainAxis:s=!1})=>{const i=X(n,e.page.borderBox.center),c={target:ot(e.page.borderBox,i),destination:t,withDroppableDisplacement:o,viewport:r};return s?Pc(c):To(c)},Yc=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:o,viewport:s,previousPageBorderBoxCenter:i,previousClientSelection:a,afterCritical:c})=>{if(!n.isEnabled)return null;const l=Le(n.descriptor.id,r),p=_e(t,n),u=Ec({isMovingForward:e,draggable:t,destination:n,insideDestination:l,previousImpact:o})||jc({isMovingForward:e,isInHomeList:p,draggable:t,draggables:r,destination:n,insideDestination:l,previousImpact:o,viewport:s,afterCritical:c});if(!u)return null;const d=$t({impact:u,draggable:t,droppable:n,draggables:r,afterCritical:c});if(Mo({draggable:t,destination:n,newPageBorderBoxCenter:d,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:_n({pageBorderBoxCenter:d,draggable:t,viewport:s}),impact:u,scrollJumpRequest:null};const m=X(d,i),h=qc({impact:u,viewport:s,destination:n,draggables:r,maxScrollChange:m});return{clientSelection:a,impact:h,scrollJumpRequest:m}};const V=e=>{const t=e.subject.active;return t||v(),t};var Kc=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:o})=>{const s=n.subject.active;if(!s)return null;const i=n.axis,a=oe(s[i.start],s[i.end]),c=_t(r).filter(p=>p!==n).filter(p=>p.isEnabled).filter(p=>!!p.subject.active).filter(p=>No(o.frame)(V(p))).filter(p=>{const u=V(p);return e?s[i.crossAxisEnd]<u[i.crossAxisEnd]:u[i.crossAxisStart]<s[i.crossAxisStart]}).filter(p=>{const u=V(p),d=oe(u[i.start],u[i.end]);return a(u[i.start])||a(u[i.end])||d(s[i.start])||d(s[i.end])}).sort((p,u)=>{const d=V(p)[i.crossAxisStart],f=V(u)[i.crossAxisStart];return e?d-f:f-d}).filter((p,u,d)=>V(p)[i.crossAxisStart]===V(d[0])[i.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const l=c.filter(p=>oe(V(p)[i.start],V(p)[i.end])(t[i.line]));return l.length===1?l[0]:l.length>1?l.sort((p,u)=>V(p)[i.start]-V(u)[i.start])[0]:c.sort((p,u)=>{const d=Sr(t,Ir(V(p))),f=Sr(t,Ir(V(u)));return d!==f?d-f:V(p)[i.start]-V(u)[i.start]})[0]};const Ar=(e,t)=>{const n=e.page.borderBox.center;return ve(e.descriptor.id,t)?X(n,t.displacedBy.point):n},Xc=(e,t)=>{const n=e.page.borderBox;return ve(e.descriptor.id,t)?ot(n,Me(t.displacedBy.point)):n};var Jc=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:o})=>r.filter(i=>To({target:Xc(i,o),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,a)=>{const c=Xe(e,pn(n,Ar(i,o))),l=Xe(e,pn(n,Ar(a,o)));return c<l?-1:l<c?1:i.descriptor.index-a.descriptor.index})[0]||null,st=F(function(t,n){const r=n[t.line];return{value:r,point:Ce(t.line,r)}});const Qc=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return Ce(r.line,t[r.line]);const o=e.subject.page.contentBox[r.size],c=Le(e.descriptor.id,n).reduce((l,p)=>l+p.client.marginBox[r.size],0)+t[r.line]-o;return c<=0?null:Ce(r.line,c)},Lo=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),_o=(e,t,n)=>{const r=e.frame;_e(t,e)&&v(),e.subject.withPlaceholder&&v();const o=st(e.axis,t.displaceBy).point,s=Qc(e,o,n),i={placeholderSize:o,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const p=Re({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:p}}const a=s?W(r.scroll.max,s):r.scroll.max,c=Lo(r,a),l=Re({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:c});return{...e,subject:l,frame:c}},Zc=e=>{const t=e.subject.withPlaceholder;t||v();const n=e.frame;if(!n){const i=Re({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const r=t.oldFrameMaxScroll;r||v();const o=Lo(n,r),s=Re({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return{...e,subject:s,frame:o}};var el=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:o,destination:s,viewport:i,afterCritical:a})=>{if(!t){if(n.length)return null;const u={displaced:Je,displacedBy:Ro,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},d=$t({impact:u,draggable:r,droppable:s,draggables:o,afterCritical:a}),f=_e(r,s)?s:_o(s,r,o);return Mo({draggable:r,destination:f,newPageBorderBoxCenter:d,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?u:null}const c=e[s.axis.line]<=t.page.borderBox.center[s.axis.line],l=(()=>{const u=t.descriptor.index;return t.descriptor.id===r.descriptor.id||c?u:u+1})(),p=st(s.axis,r.displaceBy);return xt({draggable:r,insideDestination:n,destination:s,viewport:i,displacedBy:p,last:Je,index:l})},tl=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:o,droppables:s,viewport:i,afterCritical:a})=>{const c=Kc({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:s,viewport:i});if(!c)return null;const l=Le(c.descriptor.id,o),p=Jc({pageBorderBoxCenter:t,viewport:i,destination:c,insideDestination:l,afterCritical:a}),u=el({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:o,moveRelativeTo:p,insideDestination:l,viewport:i,afterCritical:a});if(!u)return null;const d=$t({impact:u,draggable:n,droppable:c,draggables:o,afterCritical:a});return{clientSelection:_n({pageBorderBoxCenter:d,draggable:n,viewport:i}),impact:u,scrollJumpRequest:null}},J=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const nl=(e,t)=>{const n=J(e);return n?t[n]:null};var rl=({state:e,type:t})=>{const n=nl(e.impact,e.dimensions.droppables),r=!!n,o=e.dimensions.droppables[e.critical.droppable.id],s=n||o,i=s.axis.direction,a=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(a&&!r)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",l=e.dimensions.draggables[e.critical.draggable.id],p=e.current.page.borderBoxCenter,{draggables:u,droppables:d}=e.dimensions;return a?Yc({isMovingForward:c,previousPageBorderBoxCenter:p,draggable:l,destination:s,draggables:u,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):tl({isMovingForward:c,previousPageBorderBoxCenter:p,draggable:l,isOver:s,draggables:u,droppables:d,viewport:e.viewport,afterCritical:e.afterCritical})};function Ie(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Go(e){const t=oe(e.top,e.bottom),n=oe(e.left,e.right);return function(o){return t(o.y)&&n(o.x)}}function ol(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function sl({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,o=n.map(s=>{const i=s.axis,a=Ce(s.axis.line,e.center[i.line],s.page.borderBox.center[i.crossAxisLine]);return{id:s.descriptor.id,distance:Xe(r,a)}}).sort((s,i)=>i.distance-s.distance);return o[0]?o[0].id:null}function il({pageBorderBox:e,draggable:t,droppables:n}){const r=_t(n).filter(o=>{if(!o.isEnabled)return!1;const s=o.subject.active;if(!s||!ol(e,s))return!1;if(Go(s)(e.center))return!0;const i=o.axis,a=s.center[i.crossAxisLine],c=e[i.crossAxisStart],l=e[i.crossAxisEnd],p=oe(s[i.crossAxisStart],s[i.crossAxisEnd]),u=p(c),d=p(l);return!u&&!d?!0:u?c<a:l>a});return r.length?r.length===1?r[0].descriptor.id:sl({pageBorderBox:e,draggable:t,candidates:r}):null}const jo=(e,t)=>le(ot(e,t));var al=(e,t)=>{const n=e.frame;return n?jo(t,n.scroll.diff.value):t};function $o({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function cl({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var ll=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:o,viewport:s,afterCritical:i})=>{const a=n.axis,c=st(n.axis,t.displaceBy),l=c.value,p=e[a.start],u=e[a.end],f=jt(t,r).find(h=>{const b=h.descriptor.id,I=h.page.borderBox.center[a.line],x=ve(b,i),E=$o({displaced:o,id:b});return x?E?u<=I:p<I-l:E?u<=I+l:p<I})||null,m=cl({draggable:t,closest:f,inHomeList:_e(t,n)});return xt({draggable:t,insideDestination:r,destination:n,viewport:s,last:o,displacedBy:c,index:m})};const ul=4;var dl=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:o,afterCritical:s})=>{if(!r.isCombineEnabled)return null;const i=r.axis,a=st(r.axis,e.displaceBy),c=a.value,l=t[i.start],p=t[i.end],d=jt(e,o).find(m=>{const h=m.descriptor.id,b=m.page.borderBox,x=b[i.size]/ul,E=ve(h,s),D=$o({displaced:n.displaced,id:h});return E?D?p>b[i.start]+x&&p<b[i.end]-x:l>b[i.start]-c+x&&l<b[i.end]-c-x:D?p>b[i.start]+c+x&&p<b[i.end]+c-x:l>b[i.start]+x&&l<b[i.end]-x});return d?{displacedBy:a,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:d.descriptor.id,droppableId:r.descriptor.id}}}:null},Fo=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:o,viewport:s,afterCritical:i})=>{const a=jo(t.page.borderBox,e),c=il({pageBorderBox:a,draggable:t,droppables:r});if(!c)return Cc;const l=r[c],p=Le(l.descriptor.id,n),u=al(l,a);return dl({pageBorderBoxWithDroppableScroll:u,draggable:t,previousImpact:o,destination:l,insideDestination:p,afterCritical:i})||ll({pageBorderBoxWithDroppableScroll:u,draggable:t,destination:l,insideDestination:p,last:o.displaced,viewport:s,afterCritical:i})},Gn=(e,t)=>({...e,[t.descriptor.id]:t});const pl=({previousImpact:e,impact:t,droppables:n})=>{const r=J(e),o=J(t);if(!r||r===o)return n;const s=n[r];if(!s.subject.withPlaceholder)return n;const i=Zc(s);return Gn(n,i)};var fl=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:o})=>{const s=pl({previousImpact:r,impact:o,droppables:n}),i=J(o);if(!i)return s;const a=n[i];if(_e(e,a)||a.subject.withPlaceholder)return s;const c=_o(a,e,t);return Gn(s,c)},Ue=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:o,scrollJumpRequest:s})=>{const i=r||e.viewport,a=n||e.dimensions,c=t||e.current.client.selection,l=X(c,e.initial.client.selection),p={offset:l,selection:c,borderBoxCenter:W(e.initial.client.borderBoxCenter,l)},u={selection:W(p.selection,i.scroll.current),borderBoxCenter:W(p.borderBoxCenter,i.scroll.current),offset:W(p.offset,i.scroll.diff.value)},d={client:p,page:u};if(e.phase==="COLLECTING")return{...e,dimensions:a,viewport:i,current:d};const f=a.draggables[e.critical.draggable.id],m=o||Fo({pageOffset:u.offset,draggable:f,draggables:a.draggables,droppables:a.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),h=fl({draggable:f,impact:m,previousImpact:e.impact,draggables:a.draggables,droppables:a.droppables});return{...e,current:d,dimensions:{draggables:a.draggables,droppables:h},impact:m,viewport:i,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null}};function gl(e,t){return e.map(n=>t[n])}var ko=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:o})=>{const s=e.displaced,i=gl(s.all,n),a=Qe({afterDragging:i,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:o,last:s});return{...e,displaced:a}},Wo=({impact:e,draggable:t,droppable:n,draggables:r,viewport:o,afterCritical:s})=>{const i=$t({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s});return _n({pageBorderBoxCenter:i,draggable:t,viewport:o})},Ho=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&v();const r=e.impact,o=n||e.viewport,s=t||e.dimensions,{draggables:i,droppables:a}=s,c=i[e.critical.draggable.id],l=J(r);l||v();const p=a[l],u=ko({impact:r,viewport:o,destination:p,draggables:i}),d=Wo({impact:u,draggable:c,droppable:p,draggables:i,viewport:o,afterCritical:e.afterCritical});return Ue({impact:u,clientSelection:d,state:e,dimensions:s,viewport:o})},ml=e=>({index:e.index,droppableId:e.droppableId}),Uo=({draggable:e,home:t,draggables:n,viewport:r})=>{const o=st(t.axis,e.displaceBy),s=Le(t.descriptor.id,n),i=s.indexOf(e);i===-1&&v();const a=s.slice(i+1),c=a.reduce((d,f)=>(d[f.descriptor.id]=!0,d),{}),l={inVirtualList:t.descriptor.mode==="virtual",displacedBy:o,effected:c};return{impact:{displaced:Qe({afterDragging:a,destination:t,displacedBy:o,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:ml(e.descriptor)}},afterCritical:l}},hl=(e,t)=>({draggables:e.draggables,droppables:Gn(e.droppables,t)}),bl=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=mt(e.client,t),o=ht(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:o}},yl=e=>{const t=e.frame;return t||v(),t},xl=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(o=>{const s=o.descriptor.droppableId,i=t[s],c=yl(i).scroll.diff.value,l=W(r,c);return bl({draggable:o,offset:l,initialWindowScroll:n.scroll.initial})})},vl=({state:e,published:t})=>{const n=t.modified.map(I=>{const x=e.dimensions.droppables[I.droppableId];return Tn(x,I.scroll)}),r={...e.dimensions.droppables,...wo(n)},o=Ao(xl({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),s={...e.dimensions.draggables,...o};t.removals.forEach(I=>{delete s[I]});const i={droppables:r,draggables:s},a=J(e.impact),c=a?i.droppables[a]:null,l=i.draggables[e.critical.draggable.id],p=i.droppables[e.critical.droppable.id],{impact:u,afterCritical:d}=Uo({draggable:l,home:p,draggables:s,viewport:e.viewport}),f=c&&c.isCombineEnabled?e.impact:u,m=Fo({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:f,viewport:e.viewport,afterCritical:d}),h={...e,phase:"DRAGGING",impact:m,onLiftImpact:u,dimensions:i,afterCritical:d,forceShouldAnimate:!1};return e.phase==="COLLECTING"?h:{...h,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const fn=e=>e.movementMode==="SNAP",nn=(e,t,n)=>{const r=hl(e.dimensions,t);return!fn(e)||n?Ue({state:e,dimensions:r}):Ho({state:e,dimensions:r})};function rn(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Rr={phase:"IDLE",completed:null,shouldFlush:!1};var Sl=(e=Rr,t)=>{if(t.type==="FLUSH")return{...Rr,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&v();const{critical:n,clientSelection:r,viewport:o,dimensions:s,movementMode:i}=t.payload,a=s.draggables[n.draggable.id],c=s.droppables[n.droppable.id],l={selection:r,borderBoxCenter:a.client.borderBox.center,offset:k},p={client:l,page:{selection:W(l.selection,o.scroll.initial),borderBoxCenter:W(l.selection,o.scroll.initial),offset:W(l.selection,o.scroll.diff.value)}},u=_t(s.droppables).every(h=>!h.isFixedOnPage),{impact:d,afterCritical:f}=Uo({draggable:a,home:c,draggables:s.draggables,viewport:o});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:i,dimensions:s,initial:p,current:p,isWindowScrollAllowed:u,impact:d,afterCritical:f,onLiftImpact:d,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&v(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||v(),vl({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Ie(e)||v();const{client:n}=t.payload;return ye(n,e.current.client.selection)?e:Ue({state:e,clientSelection:n,impact:fn(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return rn(e);Ie(e)||v();const{id:n,newScroll:r}=t.payload,o=e.dimensions.droppables[n];if(!o)return e;const s=Tn(o,r);return nn(e,s,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Ie(e)||v();const{id:n,isEnabled:r}=t.payload,o=e.dimensions.droppables[n];o||v(),o.isEnabled===r&&v();const s={...o,isEnabled:r};return nn(e,s,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Ie(e)||v();const{id:n,isCombineEnabled:r}=t.payload,o=e.dimensions.droppables[n];o||v(),o.isCombineEnabled===r&&v();const s={...o,isCombineEnabled:r};return nn(e,s,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Ie(e)||v(),e.isWindowScrollAllowed||v();const n=t.payload.newScroll;if(ye(e.viewport.scroll.current,n))return rn(e);const r=Bo(e.viewport,n);return fn(e)?Ho({state:e,viewport:r}):Ue({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Ie(e))return e;const n=t.payload.maxScroll;if(ye(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&v();const n=rl({state:e,type:t.type});return n?Ue({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&v(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:o}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||v(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:o,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};const Il=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),El=e=>({type:"LIFT",payload:e}),Dl=e=>({type:"INITIAL_PUBLISH",payload:e}),Cl=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),wl=()=>({type:"COLLECTION_STARTING",payload:null}),Al=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),Rl=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Nl=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Vo=e=>({type:"MOVE",payload:e}),Ol=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),Tl=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Pl=()=>({type:"MOVE_UP",payload:null}),Bl=()=>({type:"MOVE_DOWN",payload:null}),Ml=()=>({type:"MOVE_RIGHT",payload:null}),Ll=()=>({type:"MOVE_LEFT",payload:null}),jn=()=>({type:"FLUSH",payload:null}),_l=e=>({type:"DROP_ANIMATE",payload:e}),$n=e=>({type:"DROP_COMPLETE",payload:e}),qo=e=>({type:"DROP",payload:e}),Gl=e=>({type:"DROP_PENDING",payload:e}),zo=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var jl=e=>({getState:t,dispatch:n})=>r=>o=>{if(o.type!=="LIFT"){r(o);return}const{id:s,clientSelection:i,movementMode:a}=o.payload,c=t();c.phase==="DROP_ANIMATING"&&n($n({completed:c.completed})),t().phase!=="IDLE"&&v(),n(jn()),n(Il({draggableId:s,movementMode:a}));const p={draggableId:s,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:u,dimensions:d,viewport:f}=e.startPublishing(p);n(Dl({critical:u,dimensions:d,clientSelection:i,movementMode:a,viewport:f}))},$l=e=>()=>t=>n=>{n.type==="INITIAL_PUBLISH"&&e.dragging(),n.type==="DROP_ANIMATE"&&e.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&e.resting(),t(n)};const Fn={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Ze={opacity:{drop:0,combining:.7},scale:{drop:.75}},Yo={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Se=`${Yo.outOfTheWay}s ${Fn.outOfTheWay}`,Ve={fluid:`opacity ${Se}`,snap:`transform ${Se}, opacity ${Se}`,drop:e=>{const t=`${e}s ${Fn.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Se}`,placeholder:`height ${Se}, width ${Se}, margin ${Se}`},Nr=e=>ye(e,k)?void 0:`translate(${e.x}px, ${e.y}px)`,gn={moveTo:Nr,drop:(e,t)=>{const n=Nr(e);if(n)return t?`${n} scale(${Ze.scale.drop})`:n}},{minDropTime:mn,maxDropTime:Ko}=Yo,Fl=Ko-mn,Or=1500,kl=.6;var Wl=({current:e,destination:t,reason:n})=>{const r=Xe(e,t);if(r<=0)return mn;if(r>=Or)return Ko;const o=r/Or,s=mn+Fl*o,i=n==="CANCEL"?s*kl:s;return Number(i.toFixed(2))},Hl=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:o})=>{const{draggables:s,droppables:i}=n,a=J(e),c=a?i[a]:null,l=i[t.descriptor.droppableId],p=Wo({impact:e,draggable:t,draggables:s,afterCritical:o,droppable:c||l,viewport:r});return X(p,t.client.borderBox.center)},Ul=({draggables:e,reason:t,lastImpact:n,home:r,viewport:o,onLiftImpact:s})=>!n.at||t!=="DROP"?{impact:ko({draggables:e,impact:s,destination:r,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:Je},didDropInsideDroppable:!0};const Vl=({getState:e,dispatch:t})=>n=>r=>{if(r.type!=="DROP"){n(r);return}const o=e(),s=r.payload.reason;if(o.phase==="COLLECTING"){t(Gl({reason:s}));return}if(o.phase==="IDLE")return;o.phase==="DROP_PENDING"&&o.isWaiting&&v(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||v();const a=o.critical,c=o.dimensions,l=c.draggables[o.critical.draggable.id],{impact:p,didDropInsideDroppable:u}=Ul({reason:s,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),d=u?Pn(p):null,f=u?Gt(p):null,m={index:a.draggable.index,droppableId:a.droppable.id},h={draggableId:l.descriptor.id,type:l.descriptor.type,source:m,reason:s,mode:o.movementMode,destination:d,combine:f},b=Hl({impact:p,draggable:l,dimensions:c,viewport:o.viewport,afterCritical:o.afterCritical}),I={critical:o.critical,afterCritical:o.afterCritical,result:h,impact:p};if(!(!ye(o.current.client.offset,b)||!!h.combine)){t($n({completed:I}));return}const E=Wl({current:o.current.client.offset,destination:b,reason:s});t(_l({newHomeClientOffset:b,dropDuration:E,completed:I}))};var ql=Vl,Xo=()=>({x:window.pageXOffset,y:window.pageYOffset});function zl(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function Yl({onWindowScroll:e}){function t(){e(Xo())}const n=Ke(t),r=zl(n);let o=be;function s(){return o!==be}function i(){s()&&v(),o=re(window,[r])}function a(){s()||v(),n.cancel(),o(),o=be}return{start:i,stop:a,isActive:s}}const Kl=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH",Xl=e=>{const t=Yl({onWindowScroll:n=>{e.dispatch(Ol({newScroll:n}))}});return n=>r=>{!t.isActive()&&r.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&Kl(r)&&t.stop(),n(r)}};var Jl=Xl,Ql=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),o=s=>{t||n||(t=!0,e(s),clearTimeout(r))};return o.wasCalled=()=>t,o},Zl=()=>{const e=[],t=o=>{const s=e.findIndex(a=>a.timerId===o);s===-1&&v();const[i]=e.splice(s,1);i.callback()};return{add:o=>{const s=setTimeout(()=>t(s)),i={timerId:s,callback:o};e.push(i)},flush:()=>{if(!e.length)return;const o=[...e];e.length=0,o.forEach(s=>{clearTimeout(s.timerId),s.callback()})}}};const eu=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,tu=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,nu=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},Fe=(e,t)=>{t()},ct=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function on(e,t,n,r){if(!e){n(r(t));return}const o=Ql(n);e(t,{announce:o}),o.wasCalled()||n(r(t))}var ru=(e,t)=>{const n=Zl();let r=null;const o=(u,d)=>{r&&v(),Fe("onBeforeCapture",()=>{const f=e().onBeforeCapture;f&&f({draggableId:u,mode:d})})},s=(u,d)=>{r&&v(),Fe("onBeforeDragStart",()=>{const f=e().onBeforeDragStart;f&&f(ct(u,d))})},i=(u,d)=>{r&&v();const f=ct(u,d);r={mode:d,lastCritical:u,lastLocation:f.source,lastCombine:null},n.add(()=>{Fe("onDragStart",()=>on(e().onDragStart,f,t,dt.onDragStart))})},a=(u,d)=>{const f=Pn(d),m=Gt(d);r||v();const h=!nu(u,r.lastCritical);h&&(r.lastCritical=u);const b=!eu(r.lastLocation,f);b&&(r.lastLocation=f);const I=!tu(r.lastCombine,m);if(I&&(r.lastCombine=m),!h&&!b&&!I)return;const x={...ct(u,r.mode),combine:m,destination:f};n.add(()=>{Fe("onDragUpdate",()=>on(e().onDragUpdate,x,t,dt.onDragUpdate))})},c=()=>{r||v(),n.flush()},l=u=>{r||v(),r=null,Fe("onDragEnd",()=>on(e().onDragEnd,u,t,dt.onDragEnd))};return{beforeCapture:o,beforeStart:s,start:i,update:a,flush:c,drop:l,abort:()=>{if(!r)return;const u={...ct(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};l(u)}}},ou=(e,t)=>{const n=ru(e,t);return r=>o=>s=>{if(s.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(s.type==="INITIAL_PUBLISH"){const a=s.payload.critical;n.beforeStart(a,s.payload.movementMode),o(s),n.start(a,s.payload.movementMode);return}if(s.type==="DROP_COMPLETE"){const a=s.payload.completed.result;n.flush(),o(s),n.drop(a);return}if(o(s),s.type==="FLUSH"){n.abort();return}const i=r.getState();i.phase==="DRAGGING"&&n.update(i.critical,i.impact)}};const su=e=>t=>n=>{if(n.type!=="DROP_ANIMATION_FINISHED"){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&v(),e.dispatch($n({completed:r.completed}))};var iu=su;const au=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return o=>s=>{if((s.type==="FLUSH"||s.type==="DROP_COMPLETE"||s.type==="DROP_ANIMATION_FINISHED")&&r(),o(s),s.type!=="DROP_ANIMATE")return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(zo())}};n=requestAnimationFrame(()=>{n=null,t=re(window,[i])})}};var cu=au,lu=e=>()=>t=>n=>{(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&e.stopPublishing(),t(n)},uu=e=>{let t=!1;return()=>n=>r=>{if(r.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(r.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){t=!1;const o=r.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const du=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH";var pu=e=>t=>n=>r=>{if(du(r)){e.stop(),n(r);return}if(r.type==="INITIAL_PUBLISH"){n(r);const o=t.getState();o.phase!=="DRAGGING"&&v(),e.start(o);return}n(r),e.scroll(t.getState())};const fu=e=>t=>n=>{if(t(n),n.type!=="PUBLISH_WHILE_DRAGGING")return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(qo({reason:r.reason})))};var gu=fu;const mu=co;var hu=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:o,autoScroller:s})=>ao(Sl,mu(pa($l(n),lu(e),jl(e),ql,iu,cu,gu,pu(s),Jl,uu(t),ou(r,o))));const sn=()=>({additions:{},removals:{},modified:{}});function bu({registry:e,callbacks:t}){let n=sn(),r=null;const o=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:c,removals:l,modified:p}=n,u=Object.keys(c).map(m=>e.draggable.getById(m).getDimension(k)).sort((m,h)=>m.descriptor.index-h.descriptor.index),d=Object.keys(p).map(m=>{const b=e.droppable.getById(m).callbacks.getScrollWhileDragging();return{droppableId:m,scroll:b}}),f={additions:u,removals:Object.keys(l),modified:d};n=sn(),t.publish(f)}))};return{add:c=>{const l=c.descriptor.id;n.additions[l]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[l]&&delete n.removals[l],o()},remove:c=>{const l=c.descriptor;n.removals[l.id]=!0,n.modified[l.droppableId]=!0,n.additions[l.id]&&delete n.additions[l.id],o()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=sn())}}}var Jo=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const o=X({x:t,y:e},{x:r,y:n});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},Qo=()=>{const e=document.documentElement;return e||v(),e},Zo=()=>{const e=Qo();return Jo({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},yu=()=>{const e=Xo(),t=Zo(),n=e.y,r=e.x,o=Qo(),s=o.clientWidth,i=o.clientHeight,a=r+s,c=n+i;return{frame:le({top:n,left:r,right:a,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:k,displacement:k}}}},xu=({critical:e,scrollOptions:t,registry:n})=>{const r=yu(),o=r.scroll.current,s=e.droppable,i=n.droppable.getAllByType(s.type).map(p=>p.callbacks.getDimensionAndWatchScroll(o,t)),a=n.draggable.getAllByType(e.draggable.type).map(p=>p.getDimension(o));return{dimensions:{draggables:Ao(a),droppables:wo(i)},critical:e,viewport:r}};function Tr(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var vu=(e,t)=>{let n=null;const r=bu({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=(d,f)=>{e.droppable.exists(d)||v(),n&&t.updateDroppableIsEnabled({id:d,isEnabled:f})},s=(d,f)=>{n&&(e.droppable.exists(d)||v(),t.updateDroppableIsCombineEnabled({id:d,isCombineEnabled:f}))},i=(d,f)=>{n&&(e.droppable.exists(d)||v(),t.updateDroppableScroll({id:d,newScroll:f}))},a=(d,f)=>{n&&e.droppable.getById(d).callbacks.scroll(f)},c=()=>{if(!n)return;r.stop();const d=n.critical.droppable;e.droppable.getAllByType(d.type).forEach(f=>f.callbacks.dragStopped()),n.unsubscribe(),n=null},l=d=>{n||v();const f=n.critical.draggable;d.type==="ADDITION"&&Tr(e,f,d.value)&&r.add(d.value),d.type==="REMOVAL"&&Tr(e,f,d.value)&&r.remove(d.value)};return{updateDroppableIsEnabled:o,updateDroppableIsCombineEnabled:s,scrollDroppable:a,updateDroppableScroll:i,startPublishing:d=>{n&&v();const f=e.draggable.getById(d.draggableId),m=e.droppable.getById(f.descriptor.droppableId),h={draggable:f.descriptor,droppable:m.descriptor},b=e.subscribe(l);return n={critical:h,unsubscribe:b},xu({critical:h,registry:e,scrollOptions:d.scrollOptions})},stopPublishing:c}},es=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",Su=e=>{window.scrollBy(e.x,e.y)};const Iu=F(e=>_t(e).filter(t=>!(!t.isEnabled||!t.frame))),Eu=(e,t)=>Iu(t).find(r=>(r.frame||v(),Go(r.frame.pageMarginBox)(e)))||null;var Du=({center:e,destination:t,droppables:n})=>{if(t){const o=n[t];return o.frame?o:null}return Eu(e,n)};const et={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Cu=(e,t,n=()=>et)=>{const r=n(),o=e[t.size]*r.startFromPercentage,s=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:o,maxScrollValueAt:s}},ts=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},kn=1,wu=(e,t,n=()=>et)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return kn;const s=1-ts({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=r.maxPixelScroll*r.ease(s);return Math.ceil(i)},Au=(e,t,n)=>{const r=n(),o=r.durationDampening.accelerateAt,s=r.durationDampening.stopDampeningAt,i=t,a=s,l=Date.now()-i;if(l>=s)return e;if(l<o)return kn;const p=ts({startOfRange:o,endOfRange:a,current:l}),u=e*r.ease(p);return Math.ceil(u)},Pr=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:o})=>{const s=wu(e,t,o);return s===0?0:r?Math.max(Au(s,n,o),kn):s},Br=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:o,getAutoScrollerOptions:s})=>{const i=Cu(e,r,s);return t[r.end]<t[r.start]?Pr({distanceToEdge:t[r.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:s}):-1*Pr({distanceToEdge:t[r.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:s})},Ru=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,o=t.width>e.width;return!o&&!r?n:o&&r?null:{x:o?0:n.x,y:r?0:n.y}};const Nu=Co(e=>e===0?0:e);var ns=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:o,getAutoScrollerOptions:s})=>{const i={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},a=Br({container:t,distanceToEdges:i,dragStartTime:e,axis:Bn,shouldUseTimeDampening:o,getAutoScrollerOptions:s}),c=Br({container:t,distanceToEdges:i,dragStartTime:e,axis:Oo,shouldUseTimeDampening:o,getAutoScrollerOptions:s}),l=Nu({x:c,y:a});if(ye(l,k))return null;const p=Ru({container:t,subject:n,proposedScroll:l});return p?ye(p,k)?null:p:null};const Ou=Co(e=>e===0?0:e>0?1:-1),Wn=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const o=W(t,r),s={x:e(o.x,n.x),y:e(o.y,n.y)};return ye(s,k)?null:s}})(),rs=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},o=Ou(n),s=Wn({max:r,current:t,change:o});return!s||o.x!==0&&s.x===0||o.y!==0&&s.y===0},Hn=(e,t)=>rs({current:e.scroll.current,max:e.scroll.max,change:t}),Tu=(e,t)=>{if(!Hn(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return Wn({current:r,max:n,change:t})},Un=(e,t)=>{const n=e.frame;return n?rs({current:n.scroll.current,max:n.scroll.max,change:t}):!1},Pu=(e,t)=>{const n=e.frame;return!n||!Un(e,t)?null:Wn({current:n.scroll.current,max:n.scroll.max,change:t})};var Bu=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:s})=>{const i=ns({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:s});return i&&Hn(e,i)?i:null},Mu=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:s})=>{const i=e.frame;if(!i)return null;const a=ns({dragStartTime:r,container:i.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:s});return a&&Un(e,a)?a:null},Mr=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:o,getAutoScrollerOptions:s})=>{const i=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const u=e.viewport,d=Bu({dragStartTime:t,viewport:u,subject:c,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:s});if(d){r(d);return}}const l=Du({center:i,destination:J(e.impact),droppables:e.dimensions.droppables});if(!l)return;const p=Mu({dragStartTime:t,droppable:l,subject:c,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:s});p&&o(l.descriptor.id,p)},Lu=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>et})=>{const r=Ke(e),o=Ke(t);let s=null;const i=l=>{s||v();const{shouldUseTimeDampening:p,dragStartTime:u}=s;Mr({state:l,scrollWindow:r,scrollDroppable:o,dragStartTime:u,shouldUseTimeDampening:p,getAutoScrollerOptions:n})};return{start:l=>{s&&v();const p=Date.now();let u=!1;const d=()=>{u=!0};Mr({state:l,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:d,scrollDroppable:d,getAutoScrollerOptions:n}),s={dragStartTime:p,shouldUseTimeDampening:u},u&&i(l)},stop:()=>{s&&(r.cancel(),o.cancel(),s=null)},scroll:i}},_u=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(a,c)=>{const l=W(a.current.client.selection,c);e({client:l})},o=(a,c)=>{if(!Un(a,c))return c;const l=Pu(a,c);if(!l)return t(a.descriptor.id,c),null;const p=X(c,l);return t(a.descriptor.id,p),X(c,p)},s=(a,c,l)=>{if(!a||!Hn(c,l))return l;const p=Tu(c,l);if(!p)return n(l),null;const u=X(l,p);return n(u),X(l,u)};return a=>{const c=a.scrollJumpRequest;if(!c)return;const l=J(a.impact);l||v();const p=o(a.dimensions.droppables[l],c);if(!p)return;const u=a.viewport,d=s(a.isWindowScrollAllowed,u,p);d&&r(a,d)}},Gu=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const o=Lu({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),s=_u({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(r().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){o.scroll(c);return}c.scrollJumpRequest&&s(c)}},start:o.start,stop:o.stop}};const Ne="data-rfd",Oe=(()=>{const e=`${Ne}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),hn=(()=>{const e=`${Ne}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),ju=(()=>{const e=`${Ne}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Lr={contextId:`${Ne}-scroll-container-context-id`},$u=e=>t=>`[${t}="${e}"]`,ke=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),Fu="pointer-events: none;";var ku=e=>{const t=$u(e),n=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Oe.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:Fu,dropAnimating:a}}})(),r=(()=>{const a=`
      transition: ${Ve.outOfTheWay};
    `;return{selector:t(hn.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),o={selector:t(ju.contextId),styles:{always:"overflow-anchor: none;"}},i=[r,n,o,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:ke(i,"always"),resting:ke(i,"resting"),dragging:ke(i,"dragging"),dropAnimating:ke(i,"dropAnimating"),userCancel:ke(i,"userCancel")}};const Wu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?y.useLayoutEffect:y.useEffect;var Q=Wu;const an=()=>{const e=document.querySelector("head");return e||v(),e},_r=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Hu(e,t){const n=T(()=>ku(e),[e]),r=y.useRef(null),o=y.useRef(null),s=C(F(u=>{const d=o.current;d||v(),d.textContent=u}),[]),i=C(u=>{const d=r.current;d||v(),d.textContent=u},[]);Q(()=>{!r.current&&!o.current||v();const u=_r(t),d=_r(t);return r.current=u,o.current=d,u.setAttribute(`${Ne}-always`,e),d.setAttribute(`${Ne}-dynamic`,e),an().appendChild(u),an().appendChild(d),i(n.always),s(n.resting),()=>{const f=m=>{const h=m.current;h||v(),an().removeChild(h),m.current=null};f(r),f(o)}},[t,i,s,n.always,n.resting,e]);const a=C(()=>s(n.dragging),[s,n.dragging]),c=C(u=>{if(u==="DROP"){s(n.dropAnimating);return}s(n.userCancel)},[s,n.dropAnimating,n.userCancel]),l=C(()=>{o.current&&s(n.resting)},[s,n.resting]);return T(()=>({dragging:a,dropping:c,resting:l}),[a,c,l])}function os(e,t){return Array.from(e.querySelectorAll(t))}var ss=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Ft(e){return e instanceof ss(e).HTMLElement}function Uu(e,t){const n=`[${Oe.contextId}="${e}"]`,r=os(document,n);if(!r.length)return null;const o=r.find(s=>s.getAttribute(Oe.draggableId)===t);return!o||!Ft(o)?null:o}function Vu(e){const t=y.useRef({}),n=y.useRef(null),r=y.useRef(null),o=y.useRef(!1),s=C(function(d,f){const m={id:d,focus:f};return t.current[d]=m,function(){const b=t.current;b[d]!==m&&delete b[d]}},[]),i=C(function(d){const f=Uu(e,d);f&&f!==document.activeElement&&f.focus()},[e]),a=C(function(d,f){n.current===d&&(n.current=f)},[]),c=C(function(){r.current||o.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const d=n.current;d&&i(d)}))},[i]),l=C(function(d){n.current=null;const f=document.activeElement;f&&f.getAttribute(Oe.draggableId)===d&&(n.current=d)},[]);return Q(()=>(o.current=!0,function(){o.current=!1;const d=r.current;d&&cancelAnimationFrame(d)}),[]),T(()=>({register:s,tryRecordFocus:l,tryRestoreFocusRecorded:c,tryShiftRecord:a}),[s,l,c,a])}function qu(){const e={draggables:{},droppables:{}},t=[];function n(u){return t.push(u),function(){const f=t.indexOf(u);f!==-1&&t.splice(f,1)}}function r(u){t.length&&t.forEach(d=>d(u))}function o(u){return e.draggables[u]||null}function s(u){const d=o(u);return d||v(),d}const i={register:u=>{e.draggables[u.descriptor.id]=u,r({type:"ADDITION",value:u})},update:(u,d)=>{const f=e.draggables[d.descriptor.id];f&&f.uniqueId===u.uniqueId&&(delete e.draggables[d.descriptor.id],e.draggables[u.descriptor.id]=u)},unregister:u=>{const d=u.descriptor.id,f=o(d);f&&u.uniqueId===f.uniqueId&&(delete e.draggables[d],e.droppables[u.descriptor.droppableId]&&r({type:"REMOVAL",value:u}))},getById:s,findById:o,exists:u=>!!o(u),getAllByType:u=>Object.values(e.draggables).filter(d=>d.descriptor.type===u)};function a(u){return e.droppables[u]||null}function c(u){const d=a(u);return d||v(),d}const l={register:u=>{e.droppables[u.descriptor.id]=u},unregister:u=>{const d=a(u.descriptor.id);d&&u.uniqueId===d.uniqueId&&delete e.droppables[u.descriptor.id]},getById:c,findById:a,exists:u=>!!a(u),getAllByType:u=>Object.values(e.droppables).filter(d=>d.descriptor.type===u)};function p(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:l,subscribe:n,clean:p}}function zu(){const e=T(qu,[]);return y.useEffect(()=>function(){B.version.startsWith("16")||B.version.startsWith("17")?requestAnimationFrame(e.clean):e.clean()},[e]),e}var Vn=B.createContext(null),vt=()=>{const e=document.body;return e||v(),e};const Yu={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var Ku=Yu;const Xu=e=>`rfd-announcement-${e}`;function Ju(e){const t=T(()=>Xu(e),[e]),n=y.useRef(null);return y.useEffect(function(){const s=document.createElement("div");return n.current=s,s.id=t,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),ce(s.style,Ku),vt().appendChild(s),function(){setTimeout(function(){const c=vt();c.contains(s)&&c.removeChild(s),s===n.current&&(n.current=null)})}},[t]),C(o=>{const s=n.current;if(s){s.textContent=o;return}},[])}let Qu=0;const is={separator:"::"};function Zu(e,t=is){return T(()=>`${e}${t.separator}${Qu++}`,[t.separator,e])}function ed(e,t=is){const n=B.useId();return T(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}var qn="useId"in B?ed:Zu;function td({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function nd({contextId:e,text:t}){const n=qn("hidden-text",{separator:"-"}),r=T(()=>td({contextId:e,uniqueId:n}),[n,e]);return y.useEffect(function(){const s=document.createElement("div");return s.id=r,s.textContent=t,s.style.display="none",vt().appendChild(s),function(){const a=vt();a.contains(s)&&a.removeChild(s)}},[r,t]),r}var kt=B.createContext(null);function as(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),t}function rd(){let e=null;function t(){return!!e}function n(i){return i===e}function r(i){e&&v();const a={abandon:i};return e=a,a}function o(){e||v(),e=null}function s(){e&&(e.abandon(),o())}return{isClaimed:t,isActive:n,claim:r,release:o,tryAbandon:s}}function tt(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const od=9,sd=13,zn=27,cs=32,id=33,ad=34,cd=35,ld=36,ud=37,dd=38,pd=39,fd=40,gd={[sd]:!0,[od]:!0};var ls=e=>{gd[e.keyCode]&&e.preventDefault()};const md=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})();var Wt=md;const us=0,Gr=5;function hd(e,t){return Math.abs(t.x-e.x)>=Gr||Math.abs(t.y-e.y)>=Gr}const jr={type:"IDLE"};function bd({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:o=>{const{button:s,clientX:i,clientY:a}=o;if(s!==us)return;const c={x:i,y:a},l=n();if(l.type==="DRAGGING"){o.preventDefault(),l.actions.move(c);return}l.type!=="PENDING"&&v();const p=l.point;if(!hd(p,c))return;o.preventDefault();const u=l.actions.fluidLift(c);r({type:"DRAGGING",actions:u})}},{eventName:"mouseup",fn:o=>{const s=n();if(s.type!=="DRAGGING"){e();return}o.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:o=>{n().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:o=>{if(n().type==="PENDING"){e();return}if(o.keyCode===zn){o.preventDefault(),e();return}ls(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:o=>{const s=n();if(s.type==="IDLE"&&v(),s.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:Wt,fn:e}]}function yd(e){const t=y.useRef(jr),n=y.useRef(be),r=T(()=>({eventName:"mousedown",fn:function(u){if(u.defaultPrevented||u.button!==us||u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)return;const d=e.findClosestDraggableId(u);if(!d)return;const f=e.tryGetLock(d,i,{sourceEvent:u});if(!f)return;u.preventDefault();const m={x:u.clientX,y:u.clientY};n.current(),l(f,m)}}),[e]),o=T(()=>({eventName:"webkitmouseforcewillbegin",fn:p=>{if(p.defaultPrevented)return;const u=e.findClosestDraggableId(p);if(!u)return;const d=e.findOptionsForDraggable(u);d&&(d.shouldRespectForcePress||e.canGetLock(u)&&p.preventDefault())}}),[e]),s=C(function(){const u={passive:!1,capture:!0};n.current=re(window,[o,r],u)},[o,r]),i=C(()=>{t.current.type!=="IDLE"&&(t.current=jr,n.current(),s())},[s]),a=C(()=>{const p=t.current;i(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[i]),c=C(function(){const u={capture:!0,passive:!1},d=bd({cancel:a,completed:i,getPhase:()=>t.current,setPhase:f=>{t.current=f}});n.current=re(window,d,u)},[a,i]),l=C(function(u,d){t.current.type!=="IDLE"&&v(),t.current={type:"PENDING",point:d,actions:u},c()},[c]);Q(function(){return s(),function(){n.current()}},[s])}function xd(){}const vd={[ad]:!0,[id]:!0,[ld]:!0,[cd]:!0};function Sd(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:o=>{if(o.keyCode===zn){o.preventDefault(),n();return}if(o.keyCode===cs){o.preventDefault(),r();return}if(o.keyCode===fd){o.preventDefault(),e.moveDown();return}if(o.keyCode===dd){o.preventDefault(),e.moveUp();return}if(o.keyCode===pd){o.preventDefault(),e.moveRight();return}if(o.keyCode===ud){o.preventDefault(),e.moveLeft();return}if(vd[o.keyCode]){o.preventDefault();return}ls(o)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Wt,fn:n}]}function Id(e){const t=y.useRef(xd),n=T(()=>({eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==cs)return;const i=e.findClosestDraggableId(s);if(!i)return;const a=e.tryGetLock(i,p,{sourceEvent:s});if(!a)return;s.preventDefault();let c=!0;const l=a.snapLift();t.current();function p(){c||v(),c=!1,t.current(),r()}t.current=re(window,Sd(l,p),{capture:!0,passive:!1})}}),[e]),r=C(function(){const s={passive:!1,capture:!0};t.current=re(window,[n],s)},[n]);Q(function(){return r(),function(){t.current()}},[r])}const cn={type:"IDLE"},Ed=120,Dd=.15;function Cd({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===zn&&n.preventDefault(),e()}},{eventName:Wt,fn:e}]}function wd({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const o=n();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;const{clientX:s,clientY:i}=r.touches[0],a={x:s,y:i};r.preventDefault(),o.actions.move(a)}},{eventName:"touchend",fn:r=>{const o=n();if(o.type!=="DRAGGING"){e();return}r.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const o=n();o.type==="IDLE"&&v();const s=r.touches[0];if(!s||!(s.force>=Dd))return;const a=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){a&&e();return}if(a){if(o.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:Wt,fn:e}]}function Ad(e){const t=y.useRef(cn),n=y.useRef(be),r=C(function(){return t.current},[]),o=C(function(f){t.current=f},[]),s=T(()=>({eventName:"touchstart",fn:function(f){if(f.defaultPrevented)return;const m=e.findClosestDraggableId(f);if(!m)return;const h=e.tryGetLock(m,a,{sourceEvent:f});if(!h)return;const b=f.touches[0],{clientX:I,clientY:x}=b,E={x:I,y:x};n.current(),u(h,E)}}),[e]),i=C(function(){const f={capture:!0,passive:!1};n.current=re(window,[s],f)},[s]),a=C(()=>{const d=t.current;d.type!=="IDLE"&&(d.type==="PENDING"&&clearTimeout(d.longPressTimerId),o(cn),n.current(),i())},[i,o]),c=C(()=>{const d=t.current;a(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[a]),l=C(function(){const f={capture:!0,passive:!1},m={cancel:c,completed:a,getPhase:r},h=re(window,wd(m),f),b=re(window,Cd(m),f);n.current=function(){h(),b()}},[c,r,a]),p=C(function(){const f=r();f.type!=="PENDING"&&v();const m=f.actions.fluidLift(f.point);o({type:"DRAGGING",actions:m,hasMoved:!1})},[r,o]),u=C(function(f,m){r().type!=="IDLE"&&v();const h=setTimeout(p,Ed);o({type:"PENDING",point:m,actions:f,longPressTimerId:h}),l()},[l,r,o,p]);Q(function(){return i(),function(){n.current();const m=r();m.type==="PENDING"&&(clearTimeout(m.longPressTimerId),o(cn))}},[r,i,o]),Q(function(){return re(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Rd=["input","button","textarea","select","option","optgroup","video","audio"];function ds(e,t){if(t==null)return!1;if(Rd.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:ds(e,t.parentElement)}function Nd(e,t){const n=t.target;return Ft(n)?ds(e,n):!1}var Od=e=>le(e.getBoundingClientRect()).center;function Td(e){return e instanceof ss(e).Element}const Pd=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function ps(e,t){return e==null?null:e[Pd](t)?e:ps(e.parentElement,t)}function Bd(e,t){return e.closest?e.closest(t):ps(e,t)}function Md(e){return`[${Oe.contextId}="${e}"]`}function Ld(e,t){const n=t.target;if(!Td(n))return null;const r=Md(e),o=Bd(n,r);return!o||!Ft(o)?null:o}function _d(e,t){const n=Ld(e,t);return n?n.getAttribute(Oe.draggableId):null}function Gd(e,t){const n=`[${hn.contextId}="${e}"]`,o=os(document,n).find(s=>s.getAttribute(hn.id)===t);return!o||!Ft(o)?null:o}function jd(e){e.preventDefault()}function lt({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function fs({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const o=n.draggable.findById(r);return!(!o||!o.options.isEnabled||!es(t.getState(),r))}function $d({lockAPI:e,contextId:t,store:n,registry:r,draggableId:o,forceSensorStop:s,sourceEvent:i}){if(!fs({lockAPI:e,store:n,registry:r,draggableId:o}))return null;const c=r.draggable.getById(o),l=Gd(t,c.descriptor.id);if(!l||i&&!c.options.canDragInteractiveElements&&Nd(l,i))return null;const p=e.claim(s||be);let u="PRE_DRAG";function d(){return c.options.shouldRespectForcePress}function f(){return e.isActive(p)}function m(A,w){lt({expected:A,phase:u,isLockActive:f,shouldWarn:!0})&&n.dispatch(w())}const h=m.bind(null,"DRAGGING");function b(A){function w(){e.release(),u="COMPLETED"}u!=="PRE_DRAG"&&(w(),v()),n.dispatch(El(A.liftActionArgs)),u="DRAGGING";function R(O,G={shouldBlockNextClick:!1}){if(A.cleanup(),G.shouldBlockNextClick){const L=re(window,[{eventName:"click",fn:jd,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(L)}w(),n.dispatch(qo({reason:O}))}return{isActive:()=>lt({expected:"DRAGGING",phase:u,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:d,drop:O=>R("DROP",O),cancel:O=>R("CANCEL",O),...A.actions}}function I(A){const w=Ke(O=>{h(()=>Vo({client:O}))});return{...b({liftActionArgs:{id:o,clientSelection:A,movementMode:"FLUID"},cleanup:()=>w.cancel(),actions:{move:w}}),move:w}}function x(){const A={moveUp:()=>h(Pl),moveRight:()=>h(Ml),moveDown:()=>h(Bl),moveLeft:()=>h(Ll)};return b({liftActionArgs:{id:o,clientSelection:Od(l),movementMode:"SNAP"},cleanup:be,actions:A})}function E(){lt({expected:"PRE_DRAG",phase:u,isLockActive:f,shouldWarn:!0})&&e.release()}return{isActive:()=>lt({expected:"PRE_DRAG",phase:u,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:d,fluidLift:I,snapLift:x,abort:E}}const Fd=[yd,Id,Ad];function kd({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:o}){const s=[...o?Fd:[],...r||[]],i=y.useState(()=>rd())[0],a=C(function(b,I){tt(b)&&!tt(I)&&i.tryAbandon()},[i]);Q(function(){let b=t.getState();return t.subscribe(()=>{const x=t.getState();a(b,x),b=x})},[i,t,a]),Q(()=>i.tryAbandon,[i.tryAbandon]);const c=C(h=>fs({lockAPI:i,registry:n,store:t,draggableId:h}),[i,n,t]),l=C((h,b,I)=>$d({lockAPI:i,registry:n,contextId:e,store:t,draggableId:h,forceSensorStop:b||null,sourceEvent:I&&I.sourceEvent?I.sourceEvent:null}),[e,i,n,t]),p=C(h=>_d(e,h),[e]),u=C(h=>{const b=n.draggable.findById(h);return b?b.options:null},[n.draggable]),d=C(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(jn()))},[i,t]),f=C(()=>i.isClaimed(),[i]),m=T(()=>({canGetLock:c,tryGetLock:l,findClosestDraggableId:p,findOptionsForDraggable:u,tryReleaseLock:d,isLockClaimed:f}),[c,l,p,u,d,f]);for(let h=0;h<s.length;h++)s[h](m)}const Wd=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};B.version.startsWith("16")||B.version.startsWith("17")?n():En.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),Hd=e=>({...et,...e.autoScrollerOptions,durationDampening:{...et.durationDampening,...e.autoScrollerOptions}});function We(e){return e.current||v(),e.current}function Ud(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:o,dragHandleUsageInstructions:s}=e,i=y.useRef(null),a=as(e),c=C(()=>Wd(a.current),[a]),l=C(()=>Hd(a.current),[a]),p=Ju(t),u=nd({contextId:t,text:s}),d=Hu(t,o),f=C(L=>{We(i).dispatch(L)},[]),m=T(()=>pr({publishWhileDragging:Cl,updateDroppableScroll:Al,updateDroppableIsEnabled:Rl,updateDroppableIsCombineEnabled:Nl,collectionStarting:wl},f),[f]),h=zu(),b=T(()=>vu(h,m),[h,m]),I=T(()=>Gu({scrollWindow:Su,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:l,...pr({move:Vo},f)}),[b.scrollDroppable,f,l]),x=Vu(t),E=T(()=>hu({announce:p,autoScroller:I,dimensionMarshal:b,focusMarshal:x,getResponders:c,styleMarshal:d}),[p,I,b,x,c,d]);i.current=E;const D=C(()=>{const L=We(i);L.getState().phase!=="IDLE"&&L.dispatch(jn())},[]),A=C(()=>{const L=We(i).getState();return L.phase==="DROP_ANIMATING"?!0:L.phase==="IDLE"?!1:L.isDragging},[]),w=T(()=>({isDragging:A,tryAbort:D}),[A,D]);n(w);const R=C(L=>es(We(i).getState(),L),[]),O=C(()=>Ie(We(i).getState()),[]),G=T(()=>({marshal:b,focus:x,contextId:t,canLift:R,isMovementAllowed:O,dragHandleUsageInstructionsId:u,registry:h}),[t,b,u,x,R,O,h]);return kd({contextId:t,store:E,registry:h,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),y.useEffect(()=>D,[D]),B.createElement(kt.Provider,{value:G},B.createElement(ec,{context:Vn,store:E},e.children))}let Vd=0;function qd(){return T(()=>`${Vd++}`,[])}function zd(){return B.useId()}var Yd="useId"in B?zd:qd;function _f(e){const t=Yd(),n=e.dragHandleUsageInstructions||dt.dragHandleUsageInstructions;return B.createElement(dc,null,r=>B.createElement(Ud,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const $r={dragging:5e3,dropAnimating:4500},Kd=(e,t)=>t?Ve.drop(t.duration):e?Ve.snap:Ve.fluid,Xd=(e,t)=>{if(e)return t?Ze.opacity.drop:Ze.opacity.combining},Jd=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function Qd(e){const n=e.dimension.client,{offset:r,combineWith:o,dropping:s}=e,i=!!o,a=Jd(e),c=!!s,l=c?gn.drop(r,i):gn.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:Kd(a,s),transform:l,opacity:Xd(i,c),zIndex:c?$r.dropAnimating:$r.dragging,pointerEvents:"none"}}function Zd(e){return{transform:gn.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function ep(e){return e.type==="DRAGGING"?Qd(e):Zd(e)}function tp(e,t,n=k){const r=window.getComputedStyle(t),o=t.getBoundingClientRect(),s=vo(o,r),i=ht(s,n),a={client:s,tagName:t.tagName.toLowerCase(),display:r.display},c={x:s.marginBox.width,y:s.marginBox.height};return{descriptor:e,placeholder:a,displaceBy:c,client:s,page:i}}function np(e){const t=qn("draggable"),{descriptor:n,registry:r,getDraggableRef:o,canDragInteractiveElements:s,shouldRespectForcePress:i,isEnabled:a}=e,c=T(()=>({canDragInteractiveElements:s,shouldRespectForcePress:i,isEnabled:a}),[s,a,i]),l=C(f=>{const m=o();return m||v(),tp(n,m,f)},[n,o]),p=T(()=>({uniqueId:t,descriptor:n,options:c,getDimension:l}),[n,l,c,t]),u=y.useRef(p),d=y.useRef(!0);Q(()=>(r.draggable.register(u.current),()=>r.draggable.unregister(u.current)),[r.draggable]),Q(()=>{if(d.current){d.current=!1;return}const f=u.current;u.current=p,r.draggable.update(p,f)},[p,r.draggable])}var Yn=B.createContext(null);function St(e){const t=y.useContext(e);return t||v(),t}function rp(e){e.preventDefault()}const op=e=>{const t=y.useRef(null),n=C((w=null)=>{t.current=w},[]),r=C(()=>t.current,[]),{contextId:o,dragHandleUsageInstructionsId:s,registry:i}=St(kt),{type:a,droppableId:c}=St(Yn),l=T(()=>({id:e.draggableId,index:e.index,type:a,droppableId:c}),[e.draggableId,e.index,a,c]),{children:p,draggableId:u,isEnabled:d,shouldRespectForcePress:f,canDragInteractiveElements:m,isClone:h,mapped:b,dropAnimationFinished:I}=e;if(!h){const w=T(()=>({descriptor:l,registry:i,getDraggableRef:r,canDragInteractiveElements:m,shouldRespectForcePress:f,isEnabled:d}),[l,i,r,m,f,d]);np(w)}const x=T(()=>d?{tabIndex:0,role:"button","aria-describedby":s,"data-rfd-drag-handle-draggable-id":u,"data-rfd-drag-handle-context-id":o,draggable:!1,onDragStart:rp}:null,[o,s,u,d]),E=C(w=>{b.type==="DRAGGING"&&b.dropping&&w.propertyName==="transform"&&(B.version.startsWith("16")||B.version.startsWith("17")?I():En.flushSync(I))},[I,b]),D=T(()=>{const w=ep(b),R=b.type==="DRAGGING"&&b.dropping?E:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":o,"data-rfd-draggable-id":u,style:w,onTransitionEnd:R},dragHandleProps:x}},[o,x,u,b,E,n]),A=T(()=>({draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}}),[l.droppableId,l.id,l.index,l.type]);return B.createElement(B.Fragment,null,p(D,b.snapshot,A))};var sp=op,gs=(e,t)=>e===t,ms=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const ip=e=>e.combine?e.combine.draggableId:null,ap=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function cp(){const e=F((o,s)=>({x:o,y:s})),t=F((o,s,i=null,a=null,c=null)=>({isDragging:!0,isClone:s,isDropAnimating:!!c,dropAnimation:c,mode:o,draggingOver:i,combineWith:a,combineTargetFor:null})),n=F((o,s,i,a,c=null,l=null,p=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:l,mode:s,offset:o,dimension:i,forceShouldAnimate:p,snapshot:t(s,a,c,l,null)}}));return(o,s)=>{if(tt(o)){if(o.critical.draggable.id!==s.draggableId)return null;const i=o.current.client.offset,a=o.dimensions.draggables[s.draggableId],c=J(o.impact),l=ap(o.impact),p=o.forceShouldAnimate;return n(e(i.x,i.y),o.movementMode,a,s.isClone,c,l,p)}if(o.phase==="DROP_ANIMATING"){const i=o.completed;if(i.result.draggableId!==s.draggableId)return null;const a=s.isClone,c=o.dimensions.draggables[s.draggableId],l=i.result,p=l.mode,u=ms(l),d=ip(l),m={duration:o.dropDuration,curve:Fn.drop,moveTo:o.newHomeClientOffset,opacity:d?Ze.opacity.drop:null,scale:d?Ze.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:c,dropping:m,draggingOver:u,combineWith:d,mode:p,forceShouldAnimate:null,snapshot:t(p,a,u,d,m)}}}return null}}function hs(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const lp={mapped:{type:"SECONDARY",offset:k,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:hs(null)}};function up(){const e=F((i,a)=>({x:i,y:a})),t=F(hs),n=F((i,a=null,c)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:a,shouldAnimateDisplacement:c,snapshot:t(a)}})),r=i=>i?n(k,i,!0):null,o=(i,a,c,l)=>{const p=c.displaced.visible[i],u=!!(l.inVirtualList&&l.effected[i]),d=Gt(c),f=d&&d.draggableId===i?a:null;if(!p){if(!u)return r(f);if(c.displaced.invisible[i])return null;const b=Me(l.displacedBy.point),I=e(b.x,b.y);return n(I,f,!0)}if(u)return r(f);const m=c.displacedBy.point,h=e(m.x,m.y);return n(h,f,p.shouldAnimate)};return(i,a)=>{if(tt(i))return i.critical.draggable.id===a.draggableId?null:o(a.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const c=i.completed;return c.result.draggableId===a.draggableId?null:o(a.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const dp=()=>{const e=cp(),t=up();return(r,o)=>e(r,o)||t(r,o)||lp},pp={dropAnimationFinished:zo},fp=yo(dp,pp,null,{context:Vn,areStatePropsEqual:gs})(sp);var gp=fp;function bs(e){return St(Yn).isUsingCloneFor===e.draggableId&&!e.isClone?null:B.createElement(gp,e)}function Gf(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return B.createElement(bs,ce({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const ys=e=>t=>e===t,mp=ys("scroll"),hp=ys("auto"),Fr=(e,t)=>t(e.overflowX)||t(e.overflowY),bp=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Fr(n,mp)||Fr(n,hp)},yp=()=>!1,xs=e=>e==null?null:e===document.body?yp()?e:null:e===document.documentElement?null:bp(e)?e:xs(e.parentElement);var bn=e=>({x:e.scrollLeft,y:e.scrollTop});const vs=e=>e?window.getComputedStyle(e).position==="fixed"?!0:vs(e.parentElement):!1;var xp=e=>{const t=xs(e),n=vs(e);return{closestScrollable:t,isFixedOnPage:n}},vp=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:o,client:s,page:i,closest:a})=>{const c=(()=>{if(!a)return null;const{scrollSize:d,client:f}=a,m=Jo({scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth,height:f.paddingBox.height,width:f.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:f,scrollSize:d,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:m,diff:{value:k,displacement:k}}}})(),l=o==="vertical"?Bn:Oo,p=Re({page:i,withPlaceholder:null,axis:l,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:l,isEnabled:t,client:s,page:i,frame:c,subject:p}};const Sp=(e,t)=>{const n=So(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,o=n.paddingBox.left-t.scrollLeft,s=r+t.scrollHeight,i=o+t.scrollWidth,c=Nn({top:r,right:i,bottom:s,left:o},n.border);return On({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var Ip=({ref:e,descriptor:t,env:n,windowScroll:r,direction:o,isDropDisabled:s,isCombineEnabled:i,shouldClipSubject:a})=>{const c=n.closestScrollable,l=Sp(e,c),p=ht(l,r),u=(()=>{if(!c)return null;const f=So(c),m={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:f,page:ht(f,r),scroll:bn(c),scrollSize:m,shouldClipSubject:a}})();return vp({descriptor:t,isEnabled:!s,isCombineEnabled:i,isFixedOnPage:n.isFixedOnPage,direction:o,client:l,page:p,closest:u})};const Ep={passive:!1},Dp={passive:!0};var kr=e=>e.shouldPublishImmediately?Ep:Dp;const ut=e=>e&&e.env.closestScrollable||null;function Cp(e){const t=y.useRef(null),n=St(kt),r=qn("droppable"),{registry:o,marshal:s}=n,i=as(e),a=T(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=y.useRef(a),l=T(()=>F((D,A)=>{t.current||v();const w={x:D,y:A};s.updateDroppableScroll(a.id,w)}),[a.id,s]),p=C(()=>{const D=t.current;return!D||!D.env.closestScrollable?k:bn(D.env.closestScrollable)},[]),u=C(()=>{const D=p();l(D.x,D.y)},[p,l]),d=T(()=>Ke(u),[u]),f=C(()=>{const D=t.current,A=ut(D);if(D&&A||v(),D.scrollOptions.shouldPublishImmediately){u();return}d()},[d,u]),m=C((D,A)=>{t.current&&v();const w=i.current,R=w.getDroppableRef();R||v();const O=xp(R),G={ref:R,descriptor:a,env:O,scrollOptions:A};t.current=G;const L=Ip({ref:R,descriptor:a,env:O,windowScroll:D,direction:w.direction,isDropDisabled:w.isDropDisabled,isCombineEnabled:w.isCombineEnabled,shouldClipSubject:!w.ignoreContainerClipping}),j=O.closestScrollable;return j&&(j.setAttribute(Lr.contextId,n.contextId),j.addEventListener("scroll",f,kr(G.scrollOptions))),L},[n.contextId,a,f,i]),h=C(()=>{const D=t.current,A=ut(D);return D&&A||v(),bn(A)},[]),b=C(()=>{const D=t.current;D||v();const A=ut(D);t.current=null,A&&(d.cancel(),A.removeAttribute(Lr.contextId),A.removeEventListener("scroll",f,kr(D.scrollOptions)))},[f,d]),I=C(D=>{const A=t.current;A||v();const w=ut(A);w||v(),w.scrollTop+=D.y,w.scrollLeft+=D.x},[]),x=T(()=>({getDimensionAndWatchScroll:m,getScrollWhileDragging:h,dragStopped:b,scroll:I}),[b,m,h,I]),E=T(()=>({uniqueId:r,descriptor:a,callbacks:x}),[x,a,r]);Q(()=>(c.current=E.descriptor,o.droppable.register(E),()=>{t.current&&b(),o.droppable.unregister(E)}),[x,a,b,E,s,o.droppable]),Q(()=>{t.current&&s.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,s]),Q(()=>{t.current&&s.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,s])}function ln(){}const Wr={width:0,height:0,margin:yc},wp=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?Wr:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Ap=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=wp({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Ve.placeholder:null}},Rp=e=>{const t=y.useRef(null),n=C(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:o,onClose:s,contextId:i}=e,[a,c]=y.useState(e.animate==="open");y.useEffect(()=>a?r!=="open"?(n(),c(!1),ln):t.current?ln:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):ln,[r,a,n]);const l=C(u=>{u.propertyName==="height"&&(o(),r==="close"&&s())},[r,s,o]),p=Ap({isAnimatingOpenOnMount:a,animate:e.animate,placeholder:e.placeholder});return B.createElement(e.placeholder.tagName,{style:p,"data-rfd-placeholder-context-id":i,onTransitionEnd:l,ref:e.innerRef})};var Np=B.memo(Rp);class Op extends B.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const Tp=e=>{const t=y.useContext(kt);t||v();const{contextId:n,isMovementAllowed:r}=t,o=y.useRef(null),s=y.useRef(null),{children:i,droppableId:a,type:c,mode:l,direction:p,ignoreContainerClipping:u,isDropDisabled:d,isCombineEnabled:f,snapshot:m,useClone:h,updateViewportMaxScroll:b,getContainerForClone:I}=e,x=C(()=>o.current,[]),E=C((j=null)=>{o.current=j},[]);C(()=>s.current,[]);const D=C((j=null)=>{s.current=j},[]),A=C(()=>{r()&&b({maxScroll:Zo()})},[r,b]);Cp({droppableId:a,type:c,mode:l,direction:p,isDropDisabled:d,isCombineEnabled:f,ignoreContainerClipping:u,getDroppableRef:x});const w=T(()=>B.createElement(Op,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:j,data:z,animate:ge})=>B.createElement(Np,{placeholder:z,onClose:j,innerRef:D,animate:ge,contextId:n,onTransitionEnd:A})),[n,A,e.placeholder,e.shouldAnimatePlaceholder,D]),R=T(()=>({innerRef:E,placeholder:w,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":n}}),[n,a,w,E]),O=h?h.dragging.draggableId:null,G=T(()=>({droppableId:a,type:c,isUsingCloneFor:O}),[a,O,c]);function L(){if(!h)return null;const{dragging:j,render:z}=h,ge=B.createElement(bs,{draggableId:j.draggableId,index:j.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(Ht,pe)=>z(Ht,pe,j));return Ks.createPortal(ge,I())}return B.createElement(Yn.Provider,{value:G},i(R,m),L())};var Pp=Tp;function Bp(){return document.body||v(),document.body}const Hr={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Bp},Ss=e=>{let t={...e},n;for(n in Hr)e[n]===void 0&&(t={...t,[n]:Hr[n]});return t},un=(e,t)=>e===t.droppable.type,Ur=(e,t)=>t.draggables[e.draggable.id],Mp=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=F(s=>({draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}})),r=F((s,i,a,c,l,p)=>{const u=l.descriptor.id;if(l.descriptor.droppableId===s){const m=p?{render:p,dragging:n(l.descriptor)}:null,h={isDraggingOver:a,draggingOverWith:a?u:null,draggingFromThisWith:u,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!1,snapshot:h,useClone:m}}if(!i)return t;if(!c)return e;const f={isDraggingOver:a,draggingOverWith:u,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!0,snapshot:f,useClone:null}});return(s,i)=>{const a=Ss(i),c=a.droppableId,l=a.type,p=!a.isDropDisabled,u=a.renderClone;if(tt(s)){const d=s.critical;if(!un(l,d))return t;const f=Ur(d,s.dimensions),m=J(s.impact)===c;return r(c,p,m,m,f,u)}if(s.phase==="DROP_ANIMATING"){const d=s.completed;if(!un(l,d.critical))return t;const f=Ur(d.critical,s.dimensions);return r(c,p,ms(d.result)===c,J(d.impact)===c,f,u)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){const d=s.completed;if(!un(l,d.critical))return t;const f=J(d.impact)===c,m=!!(d.impact.at&&d.impact.at.type==="COMBINE"),h=d.critical.droppable.id===c;return f?m?e:t:h?e:t}return t}},Lp={updateViewportMaxScroll:Tl},_p=yo(Mp,Lp,(e,t,n)=>({...Ss(n),...e,...t}),{context:Vn,areStatePropsEqual:gs})(Pp);var jf=_p;const Gp=({children:e})=>{const{flag:t}=Zr(),n=ca(t),r=xn({mode:"all",resolver:Sn(n),defaultValues:la});return g.jsxs(vn,{...r,children:[e,!1]})},$f=Gp;function Ff(e){const t=Dt(e);return de({queryKey:[ue.AUDIT_SEARCH,t],queryFn:({signal:n})=>Ji(e,n),refetchOnWindowFocus:!1})}function kf({type:e,contentId:t}){return de({queryKey:[ue.AUDIT_COMMENT,e,t],queryFn:({signal:n})=>Zi({type:e,contentId:t},n),refetchOnWindowFocus:!1})}function jp(e){return Te({mutationFn:ea,onSuccess:t=>{console.log("putPartyPet sussed",t),e(t.contentId)},onError:()=>{console.log("putPartyPet error")},onSettled:()=>{console.log("putPartyPet settled")}})}function Wf(e){const t=Dt(e);return de({queryKey:[ue.AUDIT_AUDITOR_SEARCH,t],queryFn:({signal:n})=>ta(e,n)})}function Hf(e){return Te({mutationFn:na,onSuccess:e})}const $p=({open:e,onClose:t,auditData:n,updateMissionAndCardFlag:r,flag:o,topicAuditData:s})=>{const{setAlertOpen:i}=Xs(),{mutate:a}=jp(D),{reset:c,handleSubmit:l}=Vr(),p=Jr(),u=p===we.ROLE_PERMISSIONS_MODIFY_AUDIT,d=p===we.ROLE_PERMISSIONS_AUDIT,f=p===we.ROLE_PERMISSIONS_MISSION,[m,h]=y.useState(0),[b,I]=y.useState(Array(7).fill(!1));y.useEffect(()=>{c(n)},[n,c]);const x=R=>{if(!n)return;const O={type:2,contentId:n.contentId,...R};a(O)},E=R=>{switch(m){case 0:x(R);break;case $.PASS:i({open:!0,title:"提示",message:"要將所有相關的內容（題目、題目之下的知識卡）都更新為已審核通過狀態嗎？",onOk:()=>x(R)});break;default:i({open:!0,title:"提示",message:"確認送出審查意見與建議？",onOk:()=>x(R)})}};function D(){m===0?i({open:!0,title:"編輯提示",message:"編輯成功"}):r(m),t()}const A=R=>O=>{const G=[...b];G[R]=O.target.checked,I(G)},w=["1.線索本文","2.卡片線索說明","3.知識卡文字內容","4.卡片鷹架提示文字","5.學科領域課綱對照","6.其他整體鷹架提示文字","7.解答說明"];return console.log(o),g.jsxs(In,{open:e,fullScreen:!0,onClose:t,sx:{p:14},children:[g.jsx(K,{label:"關閉",btnColor:"CANCEL_RED",sx:{position:"absolute",top:5,right:5},onClick:t}),g.jsx(Kr,{sx:{textAlign:"center",fontSize:36},id:"customized-dialog-title",children:"審查意見與建議"}),n?g.jsx(Xr,{dividers:!0,children:g.jsx(gi,{onSubmit:l(E),sx:{mb:3},children:g.jsxs(P,{gap:3,children:[g.jsxs(P,{direction:"row",textAlign:"center",gap:2,children:[g.jsxs(P,{gap:2,children:[g.jsxs(P,{direction:"row",textAlign:"center",gap:2,children:[g.jsx(De,{width:"100%",children:"審查項目"}),g.jsx(De,{width:"60%",children:"內容正確性"})]}),w.map((R,O)=>g.jsxs(P,{direction:"row",gap:2,children:[g.jsx(De,{width:"100%",children:R}),g.jsx(De,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:g.jsx(ri,{checked:b[O],onChange:A(O)})})]},O))]}),g.jsx(at,{name:"managerComment",label:"內審意見",rows:19,variant:"control",labelSx:{width:"100%"},stackSx:{gap:2,flex:1},disabled:!u}),g.jsx(at,{name:"auditorSuggestions",label:"外審建議",rows:19,variant:"control",labelSx:{width:"100%"},stackSx:{gap:2,flex:1},disabled:!d}),g.jsx(at,{name:"auditorAssessment",label:"整體評估",rows:19,variant:"control",labelSx:{width:"100%"},stackSx:{gap:2,flex:1},disabled:!d}),g.jsx(at,{name:"teacherComment",label:"出題老師回覆",rows:19,variant:"control",labelSx:{width:"100%"},stackSx:{gap:2,flex:1},disabled:!f})]}),o!==$.PASS&&g.jsxs(P,{flexDirection:"row",gap:3,justifyContent:"end",children:[g.jsx(K,{label:"儲存",type:"submit",sx:{alignSelf:"flex-end"},onClick:()=>h(0),btnColor:"CURRY",toolTopText:"暫存未發送"}),u?g.jsxs(g.Fragment,{children:[g.jsx(K,{label:"送出意見給老師",btnColor:"BROWN",type:"submit",maxWidth:180,sx:{alignSelf:"flex-end"},onClick:()=>h($.MODIFY),toolTopText:"審核不通過"}),(s==null?void 0:s.teacherData)&&g.jsx(K,{label:"送出意見給外審",btnColor:"BTN_LATTE_GRAY",type:"submit",maxWidth:180,sx:{alignSelf:"flex-end"},onClick:()=>h($.AUDITOR_REVIEW),toolTopText:"轉回原外審老師"}),g.jsx(K,{label:"審核通過",type:"submit",sx:{alignSelf:"flex-end"},onClick:()=>h($.PASS)})]}):g.jsx(K,{label:"送出意見",type:"submit",sx:{alignSelf:"flex-end"},btnColor:"DRAWER_GRAY",onClick:()=>{h(d?$.AUDITOR_FINISH:$.MODIFY_FINISH)}})]})]})})}):g.jsx(Yr,{type:"card"})]})},Uf=y.memo($p),Fp=S.object({managerComment:S.union([S.string(),S.null()]),auditorSuggestions:S.union([S.string(),S.null()]),auditorAssessment:S.union([S.string(),S.null()]).refine(e=>e===null?!0:Jr()===we.ROLE_PERMISSIONS_AUDIT?e.length>0:!0,{message:"整體評估必填"}),teacherComment:S.union([S.string(),S.null()])}),kp={managerComment:null,auditorSuggestions:null,auditorAssessment:null,teacherComment:null},Vf=({children:e})=>{const t=xn({mode:"all",resolver:Sn(Fp),defaultValues:kp});return g.jsxs(vn,{...t,children:[e,!1]})};export{jf as $,cf as A,mf as B,pf as C,Cn as D,ee as E,gi as F,yf as G,xf as H,Kp as I,vf as J,Di as K,ir as L,Cf as M,wf as N,Ti as O,Af as P,Rf as Q,Df as R,xe as S,Ef as T,rf as U,Lf as V,ef as W,Qp as X,la as Y,Ci as Z,_f as _,Wi as a,Gf as a0,wi as a1,Z as a2,kf as a3,Vf as a4,Uf as a5,tf as a6,$f as a7,me as a8,Nf as a9,Pf as aa,Bf as ab,Of as ac,Tf as ad,Mf as ae,Wf as af,Hf as ag,Ff as ah,ue as ai,Pi as aj,Zp as b,Yp as c,lf as d,Jt as e,nf as f,Jp as g,Xp as h,of as i,df as j,sf as k,Ui as l,Gi as m,af as n,eo as o,se as p,uf as q,mi as r,Y as s,hf as t,Zr as u,ff as v,gf as w,bf as x,Sf as y,If as z};
